"use strict";(self.webpackChunkreact_single_ui=self.webpackChunkreact_single_ui||[]).push([[302],{83302:function(sa,Te,x){x.r(Te),x.d(Te,{Badge:function(){return ta},Breadcrumb:function(){return Kn},BreadcrumbItem:function(){return Qn},Button:function(){return ln},Icon:function(){return O},Image:function(){return Le},Input:function(){return Un},Loading:function(){return nn},Mask:function(){return Fe},Modal:function(){return Ln},Progress:function(){return ke},Switch:function(){return wn},Toast:function(){return Pn},TreeSelect:function(){return ea},Uploader:function(){return ia}});var $=x(75271),Oe=x(82187),D=x.n(Oe),Ue=x(26068),I=x.n(Ue),We=x(67825),_=x.n(We),He=x(6024),Ze=x(31759),Ge=x.n(Ze),S="sn";function ye(i){return Array.isArray(i)?i:[i]}var Ve=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function Xe(i){return Ve.test(i)}function Je(i){return i.isImage?!0:i.file&&i.file.type?i.file.type.indexOf("image")===0:i.url?Xe(i.url):typeof i.content=="string"?i.content.indexOf("data:image")===0:!1}function pe(i){return typeof i=="function"}function Ke(i){return i!==null&&Ge()(i)==="object"}function Qe(i){return Ke(i)&&pe(i.then)&&pe(i.catch)}function Pe(i,e){return ye(i).some(function(n){return n.file?pe(e)?e(n.file):n.file.size>Number(e):!1})}function Ye(i,e){var n=[],a=[];return i.forEach(function(r){Pe(r,e)&&a.push(r),n.push(r)}),{valid:n,invalid:a}}var t=x(52676),qe=["className","icon"],_e=function(e){var n=e.className,a=e.icon,r=_()(e,qe),o=a,c=D()("".concat(S,"-icon"),n);return(0,t.jsx)(He.G,I()({icon:o,className:c},r))},O=_e,te=x(24168),Q=x(36617);te.library.add(Q.faSpinner,Q.faCircleNotch,Q.faRotate);var en=function(e){var n=e.children,a=e.type,r=a===void 0?"spinner":a,o=e.textSize,c=o===void 0?"12":o,d=e.className,l=e.textColor,s=l===void 0?"#000":l,h=e.color,f=h===void 0?"#000":h,m=e.size,b=m===void 0?"lg":m,C=D()("".concat(S,"-loading"),d),u=r||"spinner";return(0,t.jsxs)("div",{className:"".concat(C," inline-flex flex-col items-center"),children:[(0,t.jsx)(O,{icon:u,color:f,size:b,spin:!0}),(0,t.jsx)("span",{className:"inline-block mt-1",style:{fontSize:c+"px",color:s},children:n})]})},nn=en,an=x(82092),p=x.n(an),tn=x(77762),rn=["btnType","block","disabled","size","children","className","href","activeClassName","type"],da=function(i){return i.Large="lg",i.Small="sm",i}({}),ve=function(i){return i.Primary="primary",i.Default="default",i.Danger="danger",i.Link="link",i}({}),ze=function(e){var n=e.btnType,a=n===void 0?ve.Default:n,r=e.block,o=r===void 0?!1:r,c=e.disabled,d=c===void 0?!1:c,l=e.size,s=e.children,h=e.className,f=e.href,m=e.activeClassName,b=e.type,C=b===void 0?"button":b,u=_()(e,rn),v=S+"-btn",T=D()("".concat(v),h,p()(p()(p()(p()({},"".concat(v,"-").concat(a),a),"".concat(v,"-").concat(l),l),"".concat(v,"-block"),o),"disabled",a===ve.Link&&d));return a===ve.Link?(0,t.jsx)("a",I()(I()({className:T,href:f},u),{},{children:s})):(0,t.jsx)(tn.Z,{activeClassName:"".concat(v,"-active ").concat(m),children:(0,t.jsx)("button",I()(I()({className:T,type:C},u),{},{disabled:d,children:s}))})},ln=ze,on=ze,cn=x(25298),sn=x.n(cn),dn=x(17069),un=x.n(dn),vn=x(62657),ee=x.n(vn),fn=x(21742),hn=x.n(fn),mn=x(83136),gn=x.n(mn),$e=x(30967),Cn=!!$e.createPortal,xn=document.createElement("div");document.body.appendChild(xn);var bn=function(i){hn()(n,i);var e=gn()(n);function n(){var a;sn()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return a=e.call.apply(e,[this].concat(o)),p()(ee()(a),"container",null),p()(ee()(a),"maskDom",function(){var d=a.props,l=d.backgroundColor,s=l===void 0?"#00000066":l,h=d.zIndex,f=h===void 0?999:h,m={backgroundColor:s,zIndex:f};return(0,t.jsx)("div",{className:"".concat(S,"-mask"),onClick:a.handleClickMask,style:m,children:a.props.children})}),p()(ee()(a),"handleClickMask",function(){a.removeContainer(),a.props.onMaskClick&&a.props.onMaskClick()}),p()(ee()(a),"getContainer",function(){if(!a.container){var d=document.createElement("div");d.style.height="100%";var l="".concat(S,"-container-").concat(new Date().getTime());d.setAttribute("id",l),document.body.appendChild(d),a.container=d}return a.container}),p()(ee()(a),"removeContainer",function(){a.container&&(document.body.removeChild(a.container),a.container=null)}),p()(ee()(a),"preventDefault",function(d){d.preventDefault()}),a}return un()(n,[{key:"render",value:function(){var r=this.props.visible;return Cn&&r?(document.body.addEventListener("touchmove",this.preventDefault,{passive:!1}),document.body.addEventListener("scroll",this.preventDefault,{passive:!1}),$e.createPortal(this.maskDom(),this.getContainer())):(document.body.removeEventListener("touchmove",this.preventDefault,!1),document.body.removeEventListener("scroll",this.preventDefault,!1),null)}}]),n}($.Component),Fe=bn,yn=x(48305),G=x.n(yn),pn=x(78760);te.library.add(Q.faImage,Q.faSadTear);var jn=function(e){var n=(0,$.useState)(!0),a=G()(n,2),r=a[0],o=a[1],c=(0,$.useState)(!1),d=G()(c,2),l=d[0],s=d[1],h=e.alt,f=e.width,m=f===void 0?"90px":f,b=e.height,C=b===void 0?"90px":b,u=e.src,v=e.fit,T=v===void 0?"fill":v,M=e.radius,E=e.round,k=E===void 0?!1:E,y=e.onLoad,F=e.onError,N=e.showLoading,A=N===void 0?!1:N,B=e.showError,L=e.lazyLoad;(0,$.useEffect)(function(){u||s(!0)},[]);var W=D()("".concat(S,"-image-wrap"),p()({},"".concat(S,"-image-wrap-round"),k)),V={width:m,height:C,borderRadius:k?"50%":M},X=function(){if(r&&A)return(0,t.jsx)("div",{className:"".concat(S,"-image-loading"),children:(0,t.jsx)(O,{icon:"image",color:"#969799",size:"3x"})});if(l&&B)return(0,t.jsx)("div",{className:"".concat(S,"-image-error"),children:(0,t.jsx)(O,{icon:"sad-tear",color:"#969799",size:"3x"})})},R=function(){if(!(!u||l)){var w=function(ue){o(!1),y&&y(ue)},q=function(ue){s(!0),F&&F(ue)},de={alt:h,src:u,style:{objectFit:T}};return L?(0,t.jsx)(pn.ZP,{scroll:!0,offset:-20,children:(0,t.jsx)("img",I()({className:"".concat(S,"-image-img"),onError:q,onLoad:w},de))}):(0,t.jsx)("img",I()({className:"".concat(S,"-image-img"),onError:q,onLoad:w},de))}};return(0,t.jsxs)("div",{style:V,className:W,children:[X(),R()]})},Le=jn,Sn=x(79236).Z,Y=null,fe,Nn=document.createElement("div");document.body.appendChild(Nn);var ne=S+"-toast";function In(i,e){var n=D()(p()(p()({},"".concat(ne,"-mask"),i),"".concat(ne,"-nomask"),!i));Sn.newInstance({prefixCls:"".concat(ne),style:{},transitionName:"".concat(ne,"-fade"),className:n},function(a){return e&&e(a)})}var re=function(e){var n=e.content,a=e.mask,r=e.duration,o=e.onClose,c=e.type,d={info:"",success:"check-circle",fail:"times-circle",loading:"spinner"},l=d[c];fe=!1,In(a,function(s){if(s){if(Y&&(Y.destroy(),Y=null),fe){s.destroy(),fe=!1;return}Y=s,s.notice({content:(0,t.jsxs)("div",{className:"".concat(ne,"-content"),role:"alert","aria-live":"assertive",children:[!!l&&(0,t.jsx)("div",{className:"".concat(ne,"-icon-wrap"),children:(0,t.jsx)(O,{icon:l,size:"2x",spin:c==="loading"})}),(0,t.jsx)("div",{children:n})]}),duration:r,onClose:function(){o&&o(),s.destroy(),s=null,Y=null}})}})},Tn={show:function(e,n,a,r,o){var c={content:e,type:n,mask:a,duration:r,onClose:o};return re(c)},info:function(e,n,a,r){var o={content:e,type:"info",mask:n,duration:a,onClose:r};return re(o)},success:function(e,n,a,r){var o={content:e,type:"success",mask:n,duration:a,onClose:r};return re(o)},fail:function(e,n,a,r){var o={content:e,type:"fail",mask:n,duration:a,onClose:r};return re(o)},loading:function(e,n,a,r){var o={content:e,type:"loading",mask:n,duration:a,onClose:r};return re(o)},hidden:function(){Y?(Y.destroy(),Y=null):fe=!0}},Pn=Tn,zn=x(38751),$n=["visible"],he=S+"-modal",je=function(e){var n=e.visible,a=n===void 0?!1:n,r=_()(e,$n),o=function(l,s){var h={};if(l.style&&(h=l.style,typeof h=="string")){var f={cancel:{},default:{},destructive:{color:"red"}};h=f[h]||{}}var m=function(u){u.preventDefault(),l.onPress&&l.onPress()},b=I()({flex:1,padding:0,fontSize:"18px",height:"50px",lineHeight:"50px",textOverflow:"ellipsis",whiteSpace:"nowrap"},h);return(0,t.jsx)(on,{style:I()({},b),onClick:m,btnType:ve.Link,children:l.text||"Button"},s)},c=function(l){var s=l.title,h=l.message,f=l.footer;return(0,t.jsxs)("div",{className:"".concat(he),children:[(0,t.jsx)("div",{className:"".concat(he,"-header"),children:s}),(0,t.jsx)("div",{className:"".concat(he,"-body"),children:h}),(0,t.jsx)("div",{className:"".concat(he,"-footer"),children:f==null?void 0:f.map(function(m,b){return o(m,b)})})]})};return(0,t.jsx)(Fe,I()(I()({visible:a},r),{},{children:(0,t.jsx)(c,I()({},r))}))};je.alert=function(i){var e=i.title,n=i.message,a=i.footer,r=document.createElement("div");document.body.appendChild(r);var o=(0,zn.createRoot)(r),c=function(){o.unmount(),r&&r.parentNode&&r.parentNode.removeChild(r)};return o.render((0,t.jsx)(je,{visible:!0,title:e,message:n,footer:a})),{close:c}};var Fn=je,Ln=Fn,kn=["value","disabled","size","activeColor","inactiveColor"],ie=S+"-switch",Dn=function(e){var n=e.value,a=n===void 0?!1:n,r=e.disabled,o=r===void 0?!1:r,c=e.size,d=e.activeColor,l=e.inactiveColor,s=_()(e,kn),h=(0,$.useState)(a),f=G()(h,2),m=f[0],b=f[1],C=function(){o||(b(!m),e.onClick&&e.onClick(!a))},u=D()("".concat(ie),p()(p()(p()({},"".concat(ie,"-disabled"),o),"".concat(ie,"-active"),m),"".concat(ie,"-").concat(c),c)),v={};return(d||l)&&(v={backgroundColor:m?d:l}),(0,t.jsx)("div",I()(I()({className:u,style:v},s),{},{onClick:C,children:(0,t.jsx)("div",{className:"".concat(ie,"-round")})}))},wn=Dn,Bn=["onBlur","onFocus","onChange"],En=function(e){var n=e.onBlur,a=e.onFocus,r=e.onChange,o=_()(e,Bn),c=(0,$.useRef)(null),d=function(f){var m=f.target.value;n&&n(m)},l=function(f){var m=f.target.value;a&&a(m)},s=function(f){var m=f.target.value.trim();r&&r(m)};return(0,t.jsx)("input",I()({ref:c,onChange:s,onBlur:d,onFocus:l},o))},Rn=En,Mn=["type","maxLength","label","required","disabled","readonly","clearble","onChange","onFocus","onBlur","onClear","value"];te.library.add(Q.faTimesCircle);var An=function(e){var n="";switch(e){case"tel":n="tel";break;case"password":n="password";break;case"number":n="number";break;default:n=e}return n},me=S+"-input",On=function(e){var n=e.type,a=n===void 0?"text":n,r=e.maxLength,o=e.label,c=e.required,d=c===void 0?!1:c,l=e.disabled,s=l===void 0?!1:l,h=e.readonly,f=h===void 0?!1:h,m=e.clearble,b=m===void 0?!1:m,C=e.onChange,u=e.onFocus,v=e.onBlur,T=e.onClear,M=e.value,E=_()(e,Mn),k=D()("".concat(me),p()(p()(p()({},"".concat(me,"-disabled"),s),"".concat(me,"-required"),d),"".concat(me,"-readonly"),f)),y=(0,$.useState)(M||""),F=G()(y,2),N=F[0],A=F[1];(0,$.useEffect)(function(){A(M||"")},[e.value]);var B=function(w){if(a==="tel"){var q;w=((q=w)===null||q===void 0?void 0:q.replace(/\D/g,""))||""}A(w||""),C&&C(w)},L=function(w){u&&u(w)},W=function(w){v&&v(w)},V=function(){A(""),T&&T()},X=function(){var w=(N==null?void 0:N.length)||0;return r?(0,t.jsxs)("div",{className:"".concat(S,"-input-max-length"),children:[w,"/",r]}):null},R=An(a);return(0,t.jsxs)("div",{className:k,children:[(0,t.jsx)("div",{className:"".concat(S,"-input-label"),children:o}),(0,t.jsx)(Rn,I()({className:"".concat(S,"-input-self"),onChange:B,onFocus:L,onBlur:W,readOnly:f,disabled:s,type:R,value:N,maxLength:r},E)),!s&&!f&&b&&N&&(0,t.jsx)("div",{className:"".concat(S,"-input-clear"),onClick:V,children:(0,t.jsx)(O,{icon:"times-circle"})}),X()]})},Un=On,Wn=x(15558),Se=x.n(Wn),Hn=x(76246),le=S+"-progress",Zn=function(e){var n=e.percent,a=e.fixed,r=e.unfilled,o=e.color,c=e.trackColor,d=e.showPivot,l=e.pivoteText,s=e.textColor,h=e.pivotColor,f=e.inactive,m=e.children,b=e.wrapStyle,C=e.percentStyle,u,v,T,M=D()(le,"".concat(le,"-wrap"),p()({},"".concat(le,"-wrap-fixed"),a)),E=r?{background:"transparent"}:{background:c};b=I()(I()({},E),b);var k=D()("".concat(le,"-bar"));C=I()({width:"".concat(n,"%"),background:f?"rgb(202, 202, 202)":o},C);var y=function(){u&&console.log("barRef.style.width:",u.style.width);var R=l||"".concat(n,"%");if(!d)return"";var H={color:s,background:f?"rgb(202, 202, 202)":h,left:"".concat(W,"px")};return(0,t.jsxs)("span",{ref:A,style:H,className:"".concat(le,"-bar-pivot"),children:[R,m]})},F=function(R){v=R},N=function(R){u=R},A=function(R){T=R},B=(0,$.useState)(0),L=G()(B,2),W=L[0],V=L[1];return(0,$.useEffect)(function(){setTimeout(function(){u&&v&&T&&V((v.offsetWidth-T.offsetWidth)*+n/100||u.offsetWidth)},10)},[]),(0,t.jsx)("div",{ref:F,className:M,style:b,role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,children:(0,t.jsx)("div",{className:k,style:C,ref:N,children:y()})})},ke=Zn;te.library.add(Q.faTimes);var oe="".concat(S,"-uploader-item"),Gn=function(e){var n=e.item,a=e.imageFit,r=e.previewSize,o=e.deletable,c=e.index,d=e.beforeDelete,l=e.name,s=e.onDelete,h=function(){if(d){var v=d.apply(null,[n,{name:l,index:c}]);Qe(v)?v.then(function(T){T&&s&&s()}):v&&s&&s()}else s&&s()},f=function(){if(Je(n))return(0,t.jsx)(Le,{fit:a,width:r||"90px",height:r||"90px",src:n.content||n.url||""})},m=function(){if(o)return(0,t.jsx)("div",{className:"".concat(oe,"-delete"),onClick:h,children:(0,t.jsx)("div",{className:"".concat(oe,"-delete-icon"),children:(0,t.jsx)(O,{size:"2x",icon:"times"})})})},b=function(){var v=n.status,T=n.message;if(!(!v||v==="done"))return(0,t.jsxs)("div",{className:"".concat(oe,"-mask"),children:[v==="loading"&&(0,t.jsx)(O,{size:"lg",icon:"spinner",spin:!0}),v==="failed"&&(0,t.jsx)(O,{size:"lg",icon:"exclamation-circle"}),(0,t.jsx)("span",{children:T})]})},C=function(){var v=n.percent,T=n.status;if(T==="uploading")return(0,t.jsx)("div",{className:"".concat(oe,"-progress-wrap"),children:(0,t.jsx)(ke,{percent:v||0,wrapStyle:{height:"8px"}})})};return(0,t.jsxs)("div",{className:oe,children:[f(),m(),b(),C()]})},Vn=Gn,De=(0,$.createContext)({length:0}),Xn=S+"-breadcrmb",Jn=function(e){var n=e.separator,a=e.children,r=e.inactiveColor,o=e.activeColor,c=e.onSelect,d=function(m){c&&c(m)},l={length:(a==null?void 0:a.length)||0,separator:"/",inactiveColor:r,activeColor:o,onSelect:d},s=D()(Xn),h=function(){return $.Children.map(a,function(m,b){var C=m;if(C.type.displayName==="TabBarItem")return $.cloneElement(C,{index:b});console.error("Warning: Breadcrumb has a child which is not BreadcrumbItem")})};return(0,t.jsx)("ul",{className:s,children:(0,t.jsx)(De.Provider,{value:l,children:h()})})},Kn=Jn,ge=S+"-breadcrmb-item",we=function(e){var n=e.index,a=e.disabled,r=e.children,o=D()(ge,p()({},"".concat(ge,"-disabled"),a)),c=(0,$.useContext)(De),d=function(){a||c.onSelect&&c.onSelect(n)},l={color:c.length-1===n?c.activeColor:c.inactiveColor};return(0,t.jsxs)("li",{className:o,onClick:d,style:l,children:[(0,t.jsx)("span",{className:"".concat(ge,"-link"),children:r}),(0,t.jsx)("span",{className:"".concat(ge,"-separator"),children:c.length-1!==n&&c.separator})]})};we.displayName="TabBarItem";var Qn=we,ce=S+"-tree-select",Be=function(){var e=(0,$.useContext)(Ne),n=e.data,a=e.index,r=e.onChangeTree,o=e.activeColor,c=(0,$.useState)(a||0),d=G()(c,2),l=d[0],s=d[1],h=function(u,v){u.disabled||(s(v),r&&r(u,v))},f=function(u,v){return D()("".concat(ce,"-sidebar-item"),p()(p()({},"".concat(ce,"-sidebar-item-active"),l===v),"".concat(ce,"-sidebar-item-disabled"),u.disabled))},m=function(u){return{backgroundColor:o&&u===l?o:""}},b=function(){return!n||!n.length?(console.warn("The data is not a Array or the length of the data is 0"),""):n.map(function(u,v){return(0,t.jsxs)("li",{onClick:h.bind(void 0,u,v),className:f(u,v),children:[(0,t.jsx)("span",{style:m(v),className:"".concat(ce,"-sidebar-item-line")}),u.label]},v)})};return(0,t.jsx)("ul",{className:"".concat(ce,"-sidebar"),children:b()})};Be.defaultProps={};var Yn=Be,Ee=x(32699),Re=x.n(Ee),Ce=S+"-tree-select-content",Me=function(e){var n=(0,$.useContext)(Ne),a=n.data,r=n.index,o=r===void 0?0:r,c=n.activeId,d=n.multiple,l=n.onChangeTreeItem,s=n.activeColor,h=n.inactiveColor,f=[];a&&a[o]&&a[o].children&&(f=a[o].children);var m=(0,$.useState)(c),b=G()(m,2),C=b[0],u=b[1],v=function(y,F){if(!y.disabled){var N=y.value;if(C!=null&&C.includes(N)){var A=C.indexOf(N),B=Re().cloneDeep(C);B.splice(A,1),u(B),l&&l(y,B)}else if(d){var L=Re().cloneDeep(C);L==null||L.push(N),u(L),l&&l(y,L)}else u([N]),l&&l(y,N)}},T=function(y,F){var N=D()("".concat(Ce,"-item"),p()(p()({},"".concat(Ce,"-item-active"),C.includes(y.value)),"".concat(Ce,"-item-disabled"),y.disabled));return N},M=function(y){return s||h?{color:C.includes(y)?s:h||""}:{}},E=function(){return f.map(function(y,F){var N=function(B){return C.includes(B.value)?(0,t.jsx)(O,{icon:"check"}):""};return(0,t.jsxs)("li",{className:T(y,F),style:M(y.value),onClick:v.bind(void 0,y,F),children:[(0,t.jsx)("span",{children:y.label}),(0,t.jsx)("span",{children:N(y)})]},F)})};return(0,t.jsx)("ul",{className:Ce,children:E()})};Me.displayName="TreeSelectItem";var qn=Me,Ne=(0,$.createContext)({multiple:!1,data:[]}),_n=S+"-tree-select",Ae=function(e){var n=e.data,a=e.onChangeTree,r=e.onChangeTreeItem,o=e.inactiveColor,c=e.activeColor,d=e.index,l=d===void 0?0:d,s=e.activeId,h=s===void 0?[]:s,f=e.multiple,m=e.height,b=m===void 0?"300px":m,C=(0,$.useState)(l||0),u=G()(C,2),v=u[0],T=u[1],M=function(F,N){r&&r(F,N)},E=function(F,N){T(N),a&&a(F,N)},k={inactiveColor:o,activeColor:c,data:n,multiple:f,onChangeTreeItem:M,onChangeTree:E,index:v,activeId:Array.isArray(h)?h:[h]};return(0,t.jsx)("div",{className:_n,style:{height:b},children:(0,t.jsxs)(Ne.Provider,{value:k,children:[(0,t.jsx)(Yn,{}),(0,t.jsx)(qn,{})]})})};Ae.defaultProps={};var ea=Ae,na=["children","color","dot","max","content","size","fixed","style"],se=S+"-badge",aa=function(e){var n=e.children,a=e.color,r=e.dot,o=r===void 0?!1:r,c=e.max,d=c===void 0?99:c,l=e.content,s=e.size,h=e.fixed,f=e.style,m=_()(e,na),b=I()({backgroundColor:a},f);l&&(l=Number(l)?Number(l):l);var C=function(){return o?"":typeof l=="number"&&l>d?"".concat(d,"+"):l},u=D()("".concat(se,"-wrap")),v=D()(se,p()(p()(p()({},"".concat(se,"-dot-large"),o&&s==="lg"),"".concat(se,"-fixed"),typeof l=="number"||h||o),"".concat(se,"-dot"),o));return(0,t.jsxs)("div",{className:u,children:[n,(l||o)&&(0,t.jsx)("sup",I()(I()({className:v,style:I()({},b)},m),{},{children:C()}))]})},ta=aa;te.library.add(Q.faCamera);var xe="".concat(S,"-uploader"),ra=function(e){var n=(0,$.useRef)(null),a=e.multiple,r=a===void 0?!0:a,o=e.disabled,c=o===void 0?!1:o,d=e.customHeaer,l=e.previewSize,s=e.imageFit,h=s===void 0?"fill":s,f=e.maxCount,m=e.deletable,b=m===void 0?!0:m,C=e.name,u=e.customFileName,v=e.maxSize,T=e.accept,M=T===void 0?"image/*":T,E=e.action,k=e.onOversize,y=e.onChange,F=e.beforeUpload,N=e.onRemove,A=(0,$.useState)(e.fileList||[]),B=G()(A,2),L=B[0],W=B[1],V=function(g,P){W(function(j){return j.map(function(z){return z.uid===g.uid?I()(I()({},z),P):z})})},X=function(g){g.forEach(function(P){R(P,g)})},R=function(g,P){var j,z={uid:Date.now()+"upload-file",file:g.file,status:"",message:"",content:g.content};if(W(function(J){return[].concat(Se()(J),[z])}),!!g.file){var Z=new FormData;Z.append(u||((j=g.file)===null||j===void 0?void 0:j.name),g.file),Hn.Z.post(E,Z,{headers:I()({"Content-Type":"multipart/form-data"},d),onUploadProgress:function(ae){var K,Ie=Math.round(ae.loaded*100/((K=ae.total)!==null&&K!==void 0?K:0))||0;V(z,{percent:Ie,status:"uploading"})}}).then(function(J){y&&y(g.file,P,J),V(z,{status:"done"})}).catch(function(J){y&&y(g.file,P,J),V(z,{status:"failed",message:"\u4E0A\u4F20\u5931\u8D25"})})}},H=function(g,P){return(0,t.jsx)(Vn,{item:g,imageFit:h,index:P,previewSize:l,beforeDelete:g.beforeDelete,deletable:b,name:C,onDelete:function(){w(g,P)}},P)},w=function(g,P){var j=L.slice(0),z=j.splice(P,1);W(j),N&&N(z[0])},q=function(){return L.map(H)},de=function(g){return new Promise(function(P){var j=new FileReader;j.onload=function(z){P(z.target.result)},j.readAsDataURL(g)})},be=function(g){if(ue(),v&&Pe(g,v))if((0,Ee.isArray)(g)){var P=Ye(g,v),j=P.valid,z=P.invalid;g=j,k&&k(z)}else{k&&k(ye(g));return}if(g=ye(g),E){if(!g.length)return;X(g)}else W([].concat(Se()(L),Se()(g)))},ue=function(){n!=null&&n.current&&(n.current.value="")},la=function(g){if(Array.isArray(g)){if(f){var P=+f-L.length;g.length>P&&(g=g.slice(0,P))}Promise.all(g.map(function(j){return de(j)})).then(function(j){var z=g.map(function(Z,J){var ae={uid:Date.now()+"upload-file",file:Z,status:"",message:""};if(j[J]&&(ae.content=j[J]),F){var K=F(Z);if(!K)return!1;if(K&&K instanceof Promise)K.then(function(Ie){return Ie}).catch(function(){});else if(K)return ae}return ae});z=z.filter(function(Z){return Z}),z.length&&be(z)})}else de(g).then(function(j){if(f){var z=+f-L.length;if(z<=0)return}var Z={uid:Date.now()+"upload-file",file:g,status:"",message:""};j&&(Z.content=j),be(Z)})},oa=function(g){var P=g.target,j=P.files;if(!(c||!j||!j.length)){var z=j.length===1?[j[0]]:[].slice.call(j);la(z)}},ca=function(){var g=function(){return(0,t.jsx)("input",{ref:n,type:"file",accept:M,className:"".concat(xe,"-input"),capture:!0,multiple:r,disabled:c,onChange:oa})},P=D()("".concat(xe,"-button"),p()({},"".concat(xe,"-button-disabled"),c));return(0,t.jsxs)("div",{className:P,children:[(0,t.jsx)(O,{icon:"camera"}),g()]})};return(0,t.jsxs)("div",{className:xe,children:[q(),ca()]})},ia=ra}}]);
