"use strict";(self.webpackChunkreact_single_ui=self.webpackChunkreact_single_ui||[]).push([[148],{15148:function(da,Te,x){x.r(Te),x.d(Te,{Badge:function(){return ra},Breadcrumb:function(){return Jn},BreadcrumbItem:function(){return Kn},Button:function(){return tn},Icon:function(){return A},Image:function(){return Fe},Input:function(){return An},Loading:function(){return _e},Mask:function(){return ze},Modal:function(){return kn},Progress:function(){return Le},Switch:function(){return Ln},Toast:function(){return In},TreeSelect:function(){return na},Uploader:function(){return oa}});var k=x(75271),Me=x(82187),L=x.n(Me),Ae=x(26068),I=x.n(Ae),Oe=x(67825),_=x.n(Oe),Ue=x(6024),We=x(31759),He=x.n(We),N="sn";function pe(i){return Array.isArray(i)?i:[i]}var Ze=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function Ge(i){return Ze.test(i)}function Ve(i){return i.isImage?!0:i.file&&i.file.type?i.file.type.indexOf("image")===0:i.url?Ge(i.url):typeof i.content=="string"?i.content.indexOf("data:image")===0:!1}function je(i){return typeof i=="function"}function Xe(i){return i!==null&&He()(i)==="object"}function Je(i){return Xe(i)&&je(i.then)&&je(i.catch)}function Pe(i,e){return pe(i).some(function(n){return n.file?je(e)?e(n.file):n.file.size>Number(e):!1})}function Ke(i,e){var n=[],a=[];return i.forEach(function(t){Pe(t,e)&&a.push(t),n.push(t)}),{valid:n,invalid:a}}var r=x(52676),Qe=["className","icon"],Ye=function(e){var n=e.className,a=e.icon,t=_()(e,Qe),o=a,l=L()("".concat(N,"-icon"),n);return(0,r.jsx)(Ue.G,I()({icon:o,className:l},t))},A=Ye,ee=x(24168),U=x(36617);ee.library.add(U.faSpinner,U.faCircleNotch,U.faRotate);var qe=function(e){var n=e.children,a=e.type,t=a===void 0?"spinner":a,o=e.textSize,l=o===void 0?"12":o,c=e.className,s=e.textColor,f=s===void 0?"#000":s,h=e.color,d=h===void 0?"#000":h,m=e.size,u=m===void 0?"lg":m,y=L()("".concat(N,"-loading"),c),C=t||"spinner";return(0,r.jsxs)("div",{className:"".concat(y," inline-flex flex-col items-center"),children:[(0,r.jsx)(A,{icon:C,color:d,size:u,spin:!0}),(0,r.jsx)("span",{className:"inline-block mt-1",style:{fontSize:l+"px",color:f},children:n})]})},_e=qe,en=x(82092),p=x.n(en),nn=x(77762),an=["btnType","block","disabled","size","children","className","href","activeClassName","type"],ua=function(i){return i.Large="lg",i.Small="sm",i}({}),fe=function(i){return i.Primary="primary",i.Default="default",i.Danger="danger",i.Link="link",i}({}),$e=function(e){var n=e.btnType,a=n===void 0?fe.Default:n,t=e.block,o=t===void 0?!1:t,l=e.disabled,c=l===void 0?!1:l,s=e.size,f=e.children,h=e.className,d=e.href,m=e.activeClassName,u=e.type,y=u===void 0?"button":u,C=_()(e,an),v=N+"-btn",b=L()("".concat(v),h,p()(p()(p()(p()({},"".concat(v,"-").concat(a),a),"".concat(v,"-").concat(s),s),"".concat(v,"-block"),o),"disabled",a===fe.Link&&c));return a===fe.Link?(0,r.jsx)("a",I()(I()({className:b,href:d},C),{},{children:f})):(0,r.jsx)(nn.Z,{activeClassName:"".concat(v,"-active ").concat(m),children:(0,r.jsx)("button",I()(I()({className:b,type:y},C),{},{disabled:c,children:f}))})},tn=$e,rn=$e,on=x(25298),ln=x.n(on),cn=x(17069),sn=x.n(cn),dn=x(62657),ne=x.n(dn),un=x(21742),vn=x.n(un),fn=x(83136),hn=x.n(fn),ke=x(30967),mn=!!ke.createPortal,gn=document.createElement("div");document.body.appendChild(gn);var Cn=function(i){vn()(n,i);var e=hn()(n);function n(){var a;ln()(this,n);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return a=e.call.apply(e,[this].concat(o)),p()(ne()(a),"container",null),p()(ne()(a),"maskDom",function(){var c=a.props,s=c.backgroundColor,f=s===void 0?"#00000066":s,h=c.zIndex,d=h===void 0?999:h,m={backgroundColor:f,zIndex:d};return(0,r.jsx)("div",{className:"".concat(N,"-mask"),onClick:a.handleClickMask,style:m,children:a.props.children})}),p()(ne()(a),"handleClickMask",function(){a.removeContainer(),a.props.onMaskClick&&a.props.onMaskClick()}),p()(ne()(a),"getContainer",function(){if(!a.container){var c=document.createElement("div");c.style.height="100%";var s="".concat(N,"-container-").concat(new Date().getTime());c.setAttribute("id",s),document.body.appendChild(c),a.container=c}return a.container}),p()(ne()(a),"removeContainer",function(){a.container&&(document.body.removeChild(a.container),a.container=null)}),p()(ne()(a),"preventDefault",function(c){c.preventDefault()}),a}return sn()(n,[{key:"render",value:function(){var t=this.props.visible;return mn&&t?(document.body.addEventListener("touchmove",this.preventDefault,{passive:!1}),document.body.addEventListener("scroll",this.preventDefault,{passive:!1}),ke.createPortal(this.maskDom(),this.getContainer())):(document.body.removeEventListener("touchmove",this.preventDefault,!1),document.body.removeEventListener("scroll",this.preventDefault,!1),null)}}]),n}(k.Component),ze=Cn,xn=x(48305),G=x.n(xn),bn=x(78760);ee.library.add(U.faImage,U.faSadTear);var yn=function(e){var n=(0,k.useState)(!0),a=G()(n,2),t=a[0],o=a[1],l=(0,k.useState)(!1),c=G()(l,2),s=c[0],f=c[1],h=e.alt,d=e.width,m=d===void 0?"90px":d,u=e.height,y=u===void 0?"90px":u,C=e.src,v=e.fit,b=v===void 0?"fill":v,w=e.radius,B=e.round,j=B===void 0?!1:B,T=e.onLoad,D=e.onError,z=e.showLoading,F=z===void 0?!1:z,Y=e.showError,R=e.lazyLoad;(0,k.useEffect)(function(){C||f(!0)},[]);var W=L()("".concat(N,"-image-wrap"),p()({},"".concat(N,"-image-wrap-round"),j)),V={width:m,height:y,borderRadius:j?"50%":w},X=function(){if(t&&F)return(0,r.jsx)("div",{className:"".concat(N,"-image-loading"),children:(0,r.jsx)(A,{icon:"image",color:"#969799",size:"3x"})});if(s&&Y)return(0,r.jsx)("div",{className:"".concat(N,"-image-error"),children:(0,r.jsx)(A,{icon:"sad-tear",color:"#969799",size:"3x"})})},M=function(){if(!(!C||s)){var E=function(ve){o(!1),T&&T(ve)},q=function(ve){f(!0),D&&D(ve)},ue={alt:h,src:C,style:{objectFit:b}};return R?(0,r.jsx)(bn.ZP,{scroll:!0,offset:-20,children:(0,r.jsx)("img",I()({className:"".concat(N,"-image-img"),onError:q,onLoad:E},ue))}):(0,r.jsx)("img",I()({className:"".concat(N,"-image-img"),onError:q,onLoad:E},ue))}};return(0,r.jsxs)("div",{style:V,className:W,children:[X(),M()]})},Fe=yn,pn=x(79236),Q=null,he,jn=document.createElement("div");document.body.appendChild(jn);var ae=N+"-toast";function Sn(i,e){var n=L()(p()(p()({},"".concat(ae,"-mask"),i),"".concat(ae,"-nomask"),!i));pn.Z.newInstance({prefixCls:"".concat(ae),style:{},transitionName:"".concat(ae,"-fade"),className:n},function(a){return e&&e(a)})}var ie=function(e){var n=e.content,a=e.mask,t=a===void 0?!0:a,o=e.duration,l=e.onClose,c=e.type,s=c===void 0?"info":c,f={info:"",success:"check-circle",fail:"times-circle",loading:"spinner"},h=f[s];he=!1,Sn(t,function(d){if(d){if(Q&&(Q.destroy(),Q=null),he){d.destroy(),he=!1;return}Q=d,d.notice({content:(0,r.jsxs)("div",{className:"".concat(ae,"-content"),role:"alert","aria-live":"assertive",children:[!!h&&(0,r.jsx)("div",{className:"".concat(ae,"-icon-wrap"),children:(0,r.jsx)(A,{icon:h,size:"2x",spin:s==="loading"})}),(0,r.jsx)("div",{children:n})]}),duration:o,onClose:function(){l&&l(),d.destroy(),d=null,Q=null}})}})},Nn={show:function(e,n,a,t,o){var l={content:e,type:n,mask:a,duration:t,onClose:o};return ie(l)},info:function(e,n,a,t){var o={content:e,type:"info",mask:n,duration:a,onClose:t};return ie(o)},success:function(e,n,a,t){var o={content:e,type:"success",mask:n,duration:a,onClose:t};return ie(o)},fail:function(e,n,a,t){var o={content:e,type:"fail",mask:n,duration:a,onClose:t};return ie(o)},loading:function(e,n,a,t){var o={content:e,type:"loading",mask:n,duration:a,onClose:t};return ie(o)},hidden:function(){Q?(Q.destroy(),Q=null):he=!0}},In=Nn,Tn=x(38751),Pn=["visible"],me=N+"-modal",Se=function(e){var n=e.visible,a=n===void 0?!1:n,t=_()(e,Pn),o=function(s,f){var h={};if(s.style&&(h=s.style,typeof h=="string")){var d={cancel:{},default:{},destructive:{color:"red"}};h=d[h]||{}}var m=function(C){C.preventDefault(),s.onPress&&s.onPress()},u=I()({flex:1,padding:0,fontSize:"18px",height:"50px",lineHeight:"50px",textOverflow:"ellipsis",whiteSpace:"nowrap"},h);return(0,r.jsx)(rn,{style:I()({},u),onClick:m,btnType:fe.Link,children:s.text||"Button"},f)},l=function(s){var f=s.title,h=s.message,d=s.footer;return(0,r.jsxs)("div",{className:"".concat(me),children:[(0,r.jsx)("div",{className:"".concat(me,"-header"),children:f}),(0,r.jsx)("div",{className:"".concat(me,"-body"),children:h}),(0,r.jsx)("div",{className:"".concat(me,"-footer"),children:d==null?void 0:d.map(function(m,u){return o(m,u)})})]})};return(0,r.jsx)(ze,I()(I()({visible:a},t),{},{children:(0,r.jsx)(l,I()({},t))}))};Se.alert=function(i){var e=i.title,n=i.message,a=i.footer,t=document.createElement("div");document.body.appendChild(t);var o=(0,Tn.createRoot)(t),l=function(){o.unmount(),t&&t.parentNode&&t.parentNode.removeChild(t)};return o.render((0,r.jsx)(Se,{visible:!0,title:e,message:n,footer:a})),{close:l}};var $n=Se,kn=$n,zn=["value","disabled","size","activeColor","inactiveColor"],oe=N+"-switch",Fn=function(e){var n=e.value,a=n===void 0?!1:n,t=e.disabled,o=t===void 0?!1:t,l=e.size,c=e.activeColor,s=e.inactiveColor,f=_()(e,zn),h=(0,k.useState)(a),d=G()(h,2),m=d[0],u=d[1],y=function(){o||(u(!m),e.onClick&&e.onClick(!a))},C=L()("".concat(oe),p()(p()(p()({},"".concat(oe,"-disabled"),o),"".concat(oe,"-active"),m),"".concat(oe,"-").concat(l),l)),v={};return(c||s)&&(v={backgroundColor:m?c:s}),(0,r.jsx)("div",I()(I()({className:C,style:v},f),{},{onClick:y,children:(0,r.jsx)("div",{className:"".concat(oe,"-round")})}))},Ln=Fn,Dn=["onBlur","onFocus","onChange"],wn=function(e){var n=e.onBlur,a=e.onFocus,t=e.onChange,o=_()(e,Dn),l=(0,k.useRef)(null),c=function(d){var m=d.target.value;n&&n(m)},s=function(d){var m=d.target.value;a&&a(m)},f=function(d){var m=d.target.value.trim();t&&t(m)};return(0,r.jsx)("input",I()({ref:l,onChange:f,onBlur:c,onFocus:s},o))},Bn=wn,En=["type","maxLength","label","required","disabled","readonly","clearble","onChange","onFocus","onBlur","onClear","value"];ee.library.add(U.faTimesCircle);var Rn=function(e){var n="";switch(e){case"tel":n="tel";break;case"password":n="password";break;case"number":n="number";break;default:n=e}return n},ge=N+"-input",Mn=function(e){var n=e.type,a=n===void 0?"text":n,t=e.maxLength,o=e.label,l=e.required,c=l===void 0?!1:l,s=e.disabled,f=s===void 0?!1:s,h=e.readonly,d=h===void 0?!1:h,m=e.clearble,u=m===void 0?!1:m,y=e.onChange,C=e.onFocus,v=e.onBlur,b=e.onClear,w=e.value,B=_()(e,En),j=L()("".concat(ge),p()(p()(p()({},"".concat(ge,"-disabled"),f),"".concat(ge,"-required"),c),"".concat(ge,"-readonly"),d)),T=(0,k.useState)(w||""),D=G()(T,2),z=D[0],F=D[1];(0,k.useEffect)(function(){F(w||"")},[e.value]);var Y=function(E){if(a==="tel"){var q;E=((q=E)===null||q===void 0?void 0:q.replace(/\D/g,""))||""}F(E||""),y&&y(E)},R=function(E){C&&C(E)},W=function(E){v&&v(E)},V=function(){F(""),b&&b()},X=function(){var E=(z==null?void 0:z.length)||0;return t?(0,r.jsxs)("div",{className:"".concat(N,"-input-max-length"),children:[E,"/",t]}):null},M=Rn(a);return(0,r.jsxs)("div",{className:j,children:[(0,r.jsx)("div",{className:"".concat(N,"-input-label"),children:o}),(0,r.jsx)(Bn,I()({className:"".concat(N,"-input-self"),onChange:Y,onFocus:R,onBlur:W,readOnly:d,disabled:f,type:M,value:z,maxLength:t},B)),!f&&!d&&u&&z&&(0,r.jsx)("div",{className:"".concat(N,"-input-clear"),onClick:V,children:(0,r.jsx)(A,{icon:"times-circle"})}),X()]})},An=Mn,On=x(15558),le=x.n(On),Un=x(38126),te=N+"-progress",Wn=L()("".concat(te,"-bar")),Hn=function(e){var n=e.percent,a=e.fixed,t=a===void 0?!1:a,o=e.unfilled,l=e.color,c=e.trackColor,s=e.showPivot,f=e.pivoteText,h=e.textColor,d=e.pivotColor,m=e.inactive,u=e.children,y=e.wrapStyle,C=e.percentStyle,v,b,w,B=L()(te,"".concat(te,"-wrap"),p()(p()({},"".concat(te,"-wrap-fixed"),t),"".concat(te,"-inactive"),m)),j=o?{background:"transparent"}:{background:c};y=I()(I()({},j),y),C=I()({width:"".concat(n,"%"),backgroundColor:m?"rgb(202, 202, 202)":l},C);var T=function(){var M=f||"".concat(n,"%");if(!s)return"";var H={color:h,background:m?"rgb(202, 202, 202)":d,left:"".concat(W,"px")};return(0,r.jsxs)("span",{ref:F,style:H,className:"".concat(te,"-bar-pivot"),children:[M,u]})},D=function(M){b=M},z=function(M){v=M},F=function(M){w=M},Y=(0,k.useState)(0),R=G()(Y,2),W=R[0],V=R[1];return(0,k.useEffect)(function(){setTimeout(function(){v&&b&&w&&V((b.offsetWidth-w.offsetWidth)*+n/100||v.offsetWidth)},10)},[n]),(0,r.jsx)("div",{ref:D,className:B,style:y,role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,children:(0,r.jsx)("div",{className:Wn,style:C,ref:z,children:T()})})},Le=Hn;ee.library.add(U.faTimes,U.faExclamationCircle);var ce="".concat(N,"-uploader-item"),Zn=function(e){var n=e.item,a=e.imageFit,t=e.previewSize,o=e.deletable,l=e.index,c=e.beforeDelete,s=e.name,f=e.onDelete,h=function(){if(c){var v=c.apply(null,[n,{name:s,index:l}]);Je(v)?v.then(function(b){b&&f&&f()}):v&&f&&f()}else f&&f()},d=function(){if(Ve(n))return(0,r.jsx)(Fe,{fit:a,width:t||"90px",height:t||"90px",src:n.content||n.url||""})},m=function(){if(o)return(0,r.jsx)("div",{className:"".concat(ce,"-delete"),onClick:h,children:(0,r.jsx)("div",{className:"".concat(ce,"-delete-icon"),children:(0,r.jsx)(A,{size:"2x",icon:"times"})})})},u=function(){var v=n.status,b=n.message;if(!(!v||v==="done"))return(0,r.jsxs)("div",{className:"".concat(ce,"-mask"),children:[v==="loading"&&(0,r.jsx)(A,{size:"lg",icon:"spinner",spin:!0}),v==="failed"&&(0,r.jsx)(A,{size:"lg",icon:"exclamation-circle"}),(0,r.jsx)("span",{children:b})]})},y=function(){var v=n.percent,b=n.status;if(b==="uploading")return(0,r.jsx)("div",{className:"".concat(ce,"-progress-wrap"),children:(0,r.jsx)(Le,{percent:v||0,wrapStyle:{height:"8px"}})})};return(0,r.jsxs)("div",{className:ce,children:[d(),m(),u(),y()]})},Gn=Zn,De=(0,k.createContext)({length:0}),Vn=N+"-breadcrmb",Xn=function(e){var n=e.separator,a=n===void 0?"/":n,t=e.children,o=e.inactiveColor,l=e.activeColor,c=e.onSelect,s=function(u){c&&c(u)},f={length:(t==null?void 0:t.length)||0,separator:a,inactiveColor:o,activeColor:l,onSelect:s},h=L()(Vn),d=function(){return k.Children.map(t,function(u,y){var C=u;if(C.type.displayName==="TabBarItem")return k.cloneElement(C,{index:y});console.error("Warning: Breadcrumb has a child which is not BreadcrumbItem")})};return(0,r.jsx)("ul",{className:h,children:(0,r.jsx)(De.Provider,{value:f,children:d()})})},Jn=Xn,Ce=N+"-breadcrmb-item",we=function(e){var n=e.index,a=e.disabled,t=e.children,o=L()(Ce,p()({},"".concat(Ce,"-disabled"),a)),l=(0,k.useContext)(De),c=function(){a||l.onSelect&&l.onSelect(n)},s={color:l.length-1===n?l.activeColor:l.inactiveColor};return(0,r.jsxs)("li",{className:o,onClick:c,style:s,children:[(0,r.jsx)("span",{className:"".concat(Ce,"-link"),children:t}),(0,r.jsx)("span",{className:"".concat(Ce,"-separator"),children:l.length-1!==n&&l.separator})]})};we.displayName="TabBarItem";var Kn=we,se=N+"-tree-select",Qn=function(){var e=(0,k.useContext)(Ne),n=e.data,a=e.index,t=a===void 0?0:a,o=e.onChangeTree,l=e.activeColor,c=(0,k.useState)(t),s=G()(c,2),f=s[0],h=s[1],d=function(v,b){v.disabled||(h(b),o&&o(v,b))},m=function(v,b){return L()("".concat(se,"-sidebar-item"),p()(p()({},"".concat(se,"-sidebar-item-active"),f===b),"".concat(se,"-sidebar-item-disabled"),v.disabled))},u=function(v){return{backgroundColor:l&&v===f?l:""}},y=function(){return!n||!n.length?(console.warn("The data is not a Array or the length of the data is 0"),""):n.map(function(v,b){return(0,r.jsxs)("li",{onClick:d.bind(void 0,v,b),className:m(v,b),children:[(0,r.jsx)("span",{style:u(b),className:"".concat(se,"-sidebar-item-line")}),v.label]},b)})};return(0,r.jsx)("ul",{className:"".concat(se,"-sidebar"),children:y()})},Yn=Qn,Be=x(32699),Ee=x.n(Be);ee.library.add(U.faCheck);var xe=N+"-tree-select-content",Re=function(){var e=(0,k.useContext)(Ne),n=e.data,a=e.index,t=a===void 0?0:a,o=e.activeId,l=e.multiple,c=e.onChangeTreeItem,s=e.activeColor,f=e.inactiveColor,h=[];n&&n[t]&&n[t].children&&(h=n[t].children);var d=(0,k.useState)(o),m=G()(d,2),u=m[0],y=m[1],C=function(j){if(!j.disabled){var T=j.value;if(u!=null&&u.includes(T)){var D=u.indexOf(T),z=Ee().cloneDeep(u);z.splice(D,1),y(z),c&&c(j,z)}else if(l){var F=Ee().cloneDeep(u);F==null||F.push(T),y(F),c&&c(j,F)}else y([T]),c&&c(j,T)}},v=function(j){var T=L()("".concat(xe,"-item"),p()(p()({},"".concat(xe,"-item-active"),u.includes(j.value)),"".concat(xe,"-item-disabled"),j.disabled));return T},b=function(j){return s||f?{color:u.includes(j)?s:f||""}:{}},w=function(){return h.map(function(j,T){var D=function(F){return u.includes(F.value)?(0,r.jsx)(A,{icon:"check"}):""};return(0,r.jsxs)("li",{className:v(j),style:b(j.value),onClick:C.bind(void 0,j),children:[(0,r.jsx)("span",{children:j.label}),(0,r.jsx)("span",{children:D(j)})]},T)})};return(0,r.jsx)("ul",{className:xe,children:w()})};Re.displayName="TreeSelectItem";var qn=Re,Ne=(0,k.createContext)({multiple:!1,data:[]}),_n=N+"-tree-select",ea=function(e){var n=e.data,a=n===void 0?[]:n,t=e.onChangeTree,o=e.onChangeTreeItem,l=e.inactiveColor,c=e.activeColor,s=e.index,f=s===void 0?0:s,h=e.activeId,d=h===void 0?[]:h,m=e.multiple,u=e.height,y=u===void 0?"300px":u,C=(0,k.useState)(f||0),v=G()(C,2),b=v[0],w=v[1],B=function(z,F){o&&o(z,F)},j=function(z,F){w(F),t&&t(z,F)},T={inactiveColor:l,activeColor:c,data:a,multiple:m,onChangeTreeItem:B,onChangeTree:j,index:b,activeId:Array.isArray(d)?d:[d]};return(0,r.jsx)("div",{className:_n,style:{height:y},children:(0,r.jsxs)(Ne.Provider,{value:T,children:[(0,r.jsx)(Yn,{}),(0,r.jsx)(qn,{})]})})},na=ea,aa=["children","color","dot","max","size","fixed","style","content"],de=N+"-badge",ta=function(e){var n=e.children,a=e.color,t=e.dot,o=t===void 0?!1:t,l=e.max,c=l===void 0?99:l,s=e.size,f=e.fixed,h=e.style,d=e.content,m=_()(e,aa),u=d,y=I()({backgroundColor:a},h);u&&(u=Number(u)?Number(u):u);var C=function(){return o?"":typeof u=="number"&&u>c?"".concat(c,"+"):u},v=L()("".concat(de,"-wrap")),b=L()(de,p()(p()(p()({},"".concat(de,"-dot-large"),o&&s==="lg"),"".concat(de,"-fixed"),typeof u=="number"||f||o),"".concat(de,"-dot"),o));return(0,r.jsxs)("div",{className:v,children:[n,(u||o)&&(0,r.jsx)("sup",I()(I()({className:b,style:I()({},y)},m),{},{children:C()}))]})},ra=ta;ee.library.add(U.faCamera);var be="".concat(N,"-uploader"),ia=function(e){var n=(0,k.useRef)(null),a=e.multiple,t=a===void 0?!0:a,o=e.disabled,l=o===void 0?!1:o,c=e.customHeaer,s=e.previewSize,f=e.imageFit,h=f===void 0?"fill":f,d=e.maxCount,m=e.deletable,u=m===void 0?!0:m,y=e.name,C=e.customFileName,v=e.maxSize,b=e.accept,w=b===void 0?"image/*":b,B=e.action,j=e.onOversize,T=e.onChange,D=e.beforeUpload,z=e.onRemove,F=(0,k.useState)(e.fileList||[]),Y=G()(F,2),R=Y[0],W=Y[1],V=function(g,P){W(function(S){return S.map(function($){return $.uid===g.uid?I()(I()({},$),P):$})})},X=function(g){g.forEach(function(P){M(P,g)})},M=function(g,P){var S,$={uid:Date.now()+"upload-file",file:g.file,status:"",message:"",content:g.content};if(W(function(J){return[].concat(le()(J),[$])}),!!g.file){var Z=new FormData;Z.append(C||((S=g.file)===null||S===void 0?void 0:S.name),g.file),Un.Z.post(B,Z,{headers:I()({"Content-Type":"multipart/form-data"},c),onUploadProgress:function(re){var K,Ie=Math.round(re.loaded*100/((K=re.total)!==null&&K!==void 0?K:0))||0;V($,{percent:Ie,status:"uploading"})}}).then(function(J){T&&T(g.file,P,J),V($,{status:"done"})}).catch(function(J){T&&T(g.file,P,J),V($,{status:"failed",message:"\u4E0A\u4F20\u5931\u8D25"})})}},H=function(g,P){return(0,r.jsx)(Gn,{item:g,imageFit:h,index:P,previewSize:s,beforeDelete:g.beforeDelete,deletable:u,name:y,onDelete:function(){E(g,P)}},P)},E=function(g,P){var S=R.slice(0),$=S.splice(P,1);W(S),z&&z($[0])},q=function(){return R.map(H)},ue=function(g){return new Promise(function(P){var S=new FileReader;S.onload=function($){P($.target.result)},S.readAsDataURL(g)})},ye=function(g){if(ve(),v&&Pe(g,v))if((0,Be.isArray)(g)){var P=Ke(g,v),S=P.valid,$=P.invalid;g=S,j&&j($)}else{j&&j(pe(g));return}if(g=pe(g),B){if(!g.length)return;X(g)}else W([].concat(le()(R),le()(g))),T&&T("",[].concat(le()(R),le()(g)),"\u6587\u4EF6\u9009\u62E9")},ve=function(){n!=null&&n.current&&(n.current.value="")},la=function(g){if(Array.isArray(g)){if(d){var P=+d-R.length;g.length>P&&(g=g.slice(0,P))}Promise.all(g.map(function(S){return ue(S)})).then(function(S){var $=g.map(function(Z,J){var re={uid:Date.now()+"upload-file",file:Z,status:"",message:""};if(S[J]&&(re.content=S[J]),D){var K=D(Z);if(!K)return!1;if(K&&K instanceof Promise)K.then(function(Ie){return Ie}).catch(function(){});else if(K)return re}return re});$=$.filter(function(Z){return Z}),$.length&&ye($)})}else ue(g).then(function(S){if(d){var $=+d-R.length;if($<=0)return}var Z={uid:Date.now()+"upload-file",file:g,status:"",message:""};S&&(Z.content=S),ye(Z)})},ca=function(g){var P=g.target,S=P.files;if(!(l||!S||!S.length)){var $=S.length===1?[S[0]]:[].slice.call(S);la($)}},sa=function(){var g=function(){return(0,r.jsx)("input",{ref:n,type:"file",accept:w,className:"".concat(be,"-input"),capture:!0,multiple:t,disabled:l,onChange:ca})},P=L()("".concat(be,"-button"),p()({},"".concat(be,"-button-disabled"),l));return(0,r.jsxs)("div",{className:P,children:[(0,r.jsx)(A,{icon:"camera"}),g()]})};return(0,r.jsxs)("div",{className:be,children:[q(),sa()]})},oa=ia}}]);
