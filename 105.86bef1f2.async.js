"use strict";(self.webpackChunkreact_single_ui=self.webpackChunkreact_single_ui||[]).push([[105],{27105:function(sa,Pe,x){x.r(Pe),x.d(Pe,{Badge:function(){return ta},Breadcrumb:function(){return Kn},BreadcrumbItem:function(){return Qn},Button:function(){return on},Icon:function(){return M},Image:function(){return ze},Input:function(){return Un},Loading:function(){return nn},Mask:function(){return we},Modal:function(){return zn},Progress:function(){return Be},Switch:function(){return $n},Toast:function(){return Tn},TreeSelect:function(){return ea},Uploader:function(){return ia}});var F=x(75271),Me=x(82187),B=x.n(Me),Ue=x(26068),N=x.n(Ue),We=x(67825),Q=x.n(We),Ve=x(6024),He=x(31759),Ze=x.n(He),S="sn";function ye(i){return Array.isArray(i)?i:[i]}var Ge=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function Xe(i){return Ge.test(i)}function Je(i){return i.isImage?!0:i.file&&i.file.type?i.file.type.indexOf("image")===0:i.url?Xe(i.url):typeof i.content=="string"?i.content.indexOf("data:image")===0:!1}function pe(i){return typeof i=="function"}function Ke(i){return i!==null&&Ze()(i)==="object"}function Qe(i){return Ke(i)&&pe(i.then)&&pe(i.catch)}function Te(i,e){return ye(i).some(function(a){return a.file?pe(e)?e(a.file):a.file.size>e:!1})}function Ye(i,e){var a=[],n=[];return i.forEach(function(r){Te(r,e)&&n.push(r),a.push(r)}),{valid:a,invalid:n}}var t=x(52676),qe=["className","icon"],_e=function(e){var a=e.className,n=e.icon,r=Q()(e,qe),l=n,c=B()("".concat(S,"-icon"),a);return(0,t.jsx)(Ve.G,N()({icon:l,className:c},r))},M=_e,De=x(24168),ne=x(36617);De.library.add(ne.faSpinner,ne.faCircleNotch,ne.faRotate);var en=function(e){var a=e.children,n=e.type,r=n===void 0?"spinner":n,l=e.textSize,c=l===void 0?"12":l,d=e.className,o=e.textColor,s=o===void 0?"#000":o,u=e.color,v=u===void 0?"#000":u,g=e.size,b=g===void 0?"lg":g,C=B()("".concat(S,"-loading"),d),f=r||"spinner";return(0,t.jsxs)("div",{className:"".concat(C," inline-flex flex-col items-center"),children:[(0,t.jsx)(M,{icon:f,color:v,size:b,spin:!0}),(0,t.jsx)("span",{className:"inline-block mt-1",style:{fontSize:c+"px",color:s},children:a})]})},nn=en,an=x(82092),p=x.n(an),tn=x(77762),rn=["btnType","block","disabled","size","children","className","href","activeClassName","type"],da=function(i){return i.Large="lg",i.Small="sm",i}({}),de=function(i){return i.Primary="primary",i.Default="default",i.Danger="danger",i.Link="link",i}({}),Fe=function(e){var a=e.btnType,n=a===void 0?de.Default:a,r=e.block,l=r===void 0?!1:r,c=e.disabled,d=c===void 0?!1:c,o=e.size,s=e.children,u=e.className,v=e.href,g=e.activeClassName,b=e.type,C=b===void 0?"button":b,f=Q()(e,rn),h=S+"-btn",I=B()("".concat(h),u,p()(p()(p()(p()({},"".concat(h,"-").concat(n),n),"".concat(h,"-").concat(o),o),"".concat(h,"-block"),l),"disabled",n===de.Link&&d));return n===de.Link?(0,t.jsx)("a",N()(N()({className:I,href:v},f),{},{children:s})):(0,t.jsx)(tn.Z,{activeClassName:"".concat(h,"-active ").concat(g),children:(0,t.jsx)("button",N()(N()({className:I,type:C},f),{},{disabled:d,children:s}))})},on=Fe,ln=Fe,cn=x(25298),sn=x.n(cn),dn=x(17069),un=x.n(dn),vn=x(62657),q=x.n(vn),fn=x(21742),hn=x.n(fn),mn=x(83136),gn=x.n(mn),ue=x(30967),Cn=!!ue.createPortal,xn=document.createElement("div");document.body.appendChild(xn);var bn=function(i){hn()(a,i);var e=gn()(a);function a(){var n;sn()(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return n=e.call.apply(e,[this].concat(l)),p()(q()(n),"container",void 0),p()(q()(n),"maskDom",function(){var d={backgroundColor:n.props.backgroundColor||"#00000066",zIndex:n.props.zIndex||1};return(0,t.jsx)("div",{className:"".concat(S,"-mask"),onClick:n.handleClickMask,style:d,children:n.props.children})}),p()(q()(n),"handleClickMask",function(){n.removeContainer(),n.props.onClick&&n.props.onClick()}),p()(q()(n),"getContainer",function(){if(!n.container){var d=document.createElement("div"),o="".concat(S,"-container-").concat(new Date().getTime());d.setAttribute("id",o),document.body.appendChild(d),n.container=d}return n.container}),p()(q()(n),"removeContainer",function(){n.container&&(document.body.removeChild(n.container),n.container=null)}),p()(q()(n),"preventDefault",function(d){d.preventDefault()}),n}return un()(a,[{key:"render",value:function(){var r=this.props.visible;return Cn&&r?(document.body.addEventListener("touchmove",this.preventDefault,{passive:!1}),document.body.addEventListener("scroll",this.preventDefault,{passive:!1}),ue.createPortal(this.maskDom(),this.getContainer())):(document.body.removeEventListener("touchmove",this.preventDefault,!1),document.body.removeEventListener("scroll",this.preventDefault,!1),null)}}]),a}(F.Component),we=bn,yn=x(48305),X=x.n(yn),pn=x(6166);De.library.add(ne.faImage,ne.faSadTear);var jn=function(e){var a=(0,F.useState)(!0),n=X()(a,2),r=n[0],l=n[1],c=(0,F.useState)(!1),d=X()(c,2),o=d[0],s=d[1],u=e.alt,v=e.width,g=v===void 0?"90px":v,b=e.height,C=b===void 0?"90px":b,f=e.src,h=e.fit,I=h===void 0?"fill":h,A=e.radius,R=e.round,k=R===void 0?!1:R,y=e.onLoad,w=e.onError,P=e.showLoading,O=P===void 0?!1:P,L=e.showError,z=e.lazyLoad;(0,F.useEffect)(function(){f||s(!0)},[]);var W=B()("".concat(S,"-image-wrap"),p()({},"".concat(S,"-image-wrap-round"),k)),H={width:g,height:C,borderRadius:k?"50%":A},Z=function(){if(r&&O)return(0,t.jsx)("div",{className:"".concat(S,"-image-loading"),children:(0,t.jsx)(M,{icon:"image",color:"#969799",size:"3x"})});if(o&&L)return(0,t.jsx)("div",{className:"".concat(S,"-image-error"),children:(0,t.jsx)(M,{icon:"sad-tear",color:"#969799",size:"3x"})})},$=function(){if(!(!f||o)){var K=function(se){l(!1),y&&y(se)},xe=function(se){s(!0),w&&w(se)},ce={alt:u,src:f,style:{objectFit:I}};return z?(0,t.jsx)(pn.ZP,{scroll:!0,offset:-20,children:(0,t.jsx)("img",N()({className:"".concat(S,"-image-img"),onError:xe,onLoad:K},ce))}):(0,t.jsx)("img",N()({className:"".concat(S,"-image-img"),onError:xe,onLoad:K},ce))}};return(0,t.jsxs)("div",{style:H,className:W,children:[Z(),$()]})},ze=jn,Sn=x(61398).Z,J=null,ve,Nn=document.createElement("div");document.body.appendChild(Nn);var _=S+"-toast";function In(i,e){var a=B()(p()(p()({},"".concat(_,"-mask"),i),"".concat(_,"-nomask"),!i));Sn.newInstance({prefixCls:"".concat(_),style:{},transitionName:"".concat(_,"-fade"),className:a},function(n){return e&&e(n)})}var ae=function(e){var a=e.content,n=e.mask,r=e.duration,l=e.onClose,c=e.type,d={info:"",success:"check-circle",fail:"times-circle",loading:"spinner"},o=d[c];ve=!1,In(n,function(s){if(s){if(J&&(J.destroy(),J=null),ve){s.destroy(),ve=!1;return}J=s,s.notice({content:(0,t.jsxs)("div",{className:"".concat(_,"-content"),role:"alert","aria-live":"assertive",children:[!!o&&(0,t.jsx)("div",{className:"".concat(_,"-icon-wrap"),children:(0,t.jsx)(M,{icon:o,size:"2x",spin:c==="loading"})}),(0,t.jsx)("div",{children:a})]}),duration:r,onClose:function(){l&&l(),s.destroy(),s=null,J=null}})}})},Pn={show:function(e,a,n,r,l){var c={content:e,type:a,mask:n,duration:r,onClose:l};return ae(c)},info:function(e,a,n,r){var l={content:e,type:"info",mask:a,duration:n,onClose:r};return ae(l)},success:function(e,a,n,r){var l={content:e,type:"success",mask:a,duration:n,onClose:r};return ae(l)},fail:function(e,a,n,r){var l={content:e,type:"fail",mask:a,duration:n,onClose:r};return ae(l)},loading:function(e,a,n,r){var l={content:e,type:"loading",mask:a,duration:n,onClose:r};return ae(l)},hidden:function(){J?(J.destroy(),J=null):ve=!0}},Tn=Pn,Dn=["visible"],fe=S+"-modal",Fn=function(e){var a=e.visible,n=a===void 0?!1:a,r=Q()(e,Dn),l=function(o,s){var u={};if(o.style&&(u=o.style,typeof u=="string")){var v={cancel:{},default:{},destructive:{color:"red"}};u=v[u]||{}}var g=function(f){f.preventDefault(),o.onPress&&o.onPress()},b=N()({flex:1,padding:0,fontSize:"18px",height:"50px",lineHeight:"50px",textOverflow:"ellipsis",whiteSpace:"nowrap"},u);return(0,t.jsx)(ln,{style:N()({},b),onClick:g,btnType:de.Link,children:o.text||"Button"},s)},c=function(o){var s=o.title,u=o.message,v=o.footer;return(0,t.jsxs)("div",{className:"".concat(fe),children:[(0,t.jsx)("div",{className:"".concat(fe,"-header"),children:s}),(0,t.jsx)("div",{className:"".concat(fe,"-body"),children:u}),(0,t.jsx)("div",{className:"".concat(fe,"-footer"),children:v==null?void 0:v.map(function(g,b){return l(g,b)})})]})};return(0,t.jsx)(we,N()(N()({visible:n},r),{},{children:(0,t.jsx)(c,N()({},r))}))},je=Fn,ke=x(32699),Se=x.n(ke);function wn(i){var e=i.title,a=i.message,n=i.footer,r=document.createElement("div");document.body.appendChild(r);var l=!1;function c(){ue.unmountComponentAtNode(r),r&&r.parentNode&&r.parentNode.removeChild(r)}var d="";if(n){var o=Se().cloneDeep(n);d=o.map(function(s){var u=s.onPress||function(){};return s.onPress=function(){if(!l){var v=u();v&&v.then?v.then(function(){l=!0,c()}).catch(function(){}):(l=!0,c())}},s})}ue.render((0,t.jsx)(je,{visible:!0,title:e,message:a,footer:d}),r)}je.alert=wn;var zn=je,kn=["value","disabled","size","activeColor","inactiveColor"],te=S+"-switch",Bn=function(e){var a=e.value,n=a===void 0?!1:a,r=e.disabled,l=r===void 0?!1:r,c=e.size,d=e.activeColor,o=e.inactiveColor,s=Q()(e,kn),u=n,v=function(){l||(u=!n,e.onClick&&e.onClick(u))},g=B()("".concat(te),p()(p()(p()({},"".concat(te,"-disabled"),l),"".concat(te,"-active"),u),"".concat(te,"-").concat(c),c)),b={};return(d||o)&&(b={backgroundColor:u?d:o}),(0,t.jsx)("div",N()(N()({className:g,style:b},s),{},{onClick:v,children:(0,t.jsx)("div",{className:"".concat(te,"-round")})}))},$n=Bn,Ln=["onBlur","onFocus","onChange"],En=function(e){var a=e.onBlur,n=e.onFocus,r=e.onChange,l=Q()(e,Ln),c=(0,F.useRef)(null),d=function(v){var g=v.target.value;a&&a(g)},o=function(v){var g=v.target.value;n&&n(g)},s=function(v){var g=v.target.value.trim();r&&r(g)};return(0,t.jsx)("input",N()({ref:c,onChange:s,onBlur:d,onFocus:o},l))},Rn=En,An=["type","label","required","disabled","readonly","clearble","defaultValue","onChange","onFocus","onBlur","onClear","value"],On=function(e){var a="";switch(e){case"phone":a="tel";break;case"password":a="password";break;case"number":a="number";break;default:a=e}return a},he=S+"-input-wrap",Mn=function(e){var a=e.type,n=a===void 0?"text":a,r=e.label,l=e.required,c=l===void 0?!1:l,d=e.disabled,o=d===void 0?!1:d,s=e.readonly,u=s===void 0?!1:s,v=e.clearble,g=v===void 0?!1:v,b=e.defaultValue,C=e.onChange,f=e.onFocus,h=e.onBlur,I=e.onClear,A=e.value,R=Q()(e,An),k=B()("".concat(he),p()(p()(p()({},"".concat(he,"-disabled"),o),"".concat(he,"-required"),c),"".concat(he,"-readonly"),u)),y=(0,F.useState)(A||""),w=X()(y,2),P=w[0],O=w[1];(0,F.useEffect)(function(){O(A||"")},[e.value]);var L=function(E){if(n==="phone"){var K;E=(K=E)===null||K===void 0?void 0:K.replace(/\D/g,"")}O(E||""),C&&C(E)},z=function(E){f&&f(E)},W=function(E){h&&h(E)},H=function(){O(""),I&&I()},Z=On(n);return(0,t.jsxs)("div",{className:k,children:[(0,t.jsx)("div",{className:"".concat(S,"-input-label"),children:r}),(0,t.jsx)(Rn,N()({className:"".concat(S,"-input-self"),onChange:L,onFocus:z,onBlur:W,readOnly:u,disabled:o,type:Z,value:P},R)),!o&&!u&&g&&P&&(0,t.jsx)("div",{className:"".concat(S,"-input-clear"),children:(0,t.jsx)(M,{icon:"times-circle",onClick:H})})]})},Un=Mn,Wn=x(15558),Ne=x.n(Wn),Vn=x(46148),re=S+"-progress",Hn=function(e){var a=e.children,n=e.percent,r=e.fixed,l=e.unfilled,c=e.color,d=e.trackColor,o=e.showPivot,s=e.pivoteText,u=e.textColor,v=e.pivotColor,g=e.inactive,b=e.wrapStyle,C=e.percentStyle,f,h,I,A=B()(re,"".concat(re,"-wrap"),p()({},"".concat(re,"-wrap-fixed"),r)),R=l?{background:"transparent"}:{background:d};b=N()(N()({},R),b);var k=B()("".concat(re,"-bar"));C=N()({width:"".concat(n,"%"),background:g?"rgb(202, 202, 202)":c},C);var y=function(){f&&console.log("barRef.style.width:",f.style.width);var $=s||"".concat(n,"%");if(!o)return"";var E={color:u,background:g?"rgb(202, 202, 202)":v,left:"".concat(W,"px")};return(0,t.jsx)("span",{ref:O,style:E,className:"".concat(re,"-bar-pivot"),children:$})},w=function($){h=$},P=function($){f=$},O=function($){I=$},L=(0,F.useState)(0),z=X()(L,2),W=z[0],H=z[1];return(0,F.useEffect)(function(){setTimeout(function(){f&&h&&I&&H((h.offsetWidth-I.offsetWidth)*+n/100||f.offsetWidth)},10)},[]),(0,t.jsx)("div",{ref:w,className:A,style:b,role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,children:(0,t.jsx)("div",{className:k,style:C,ref:P,children:y()})})},Be=Hn,ie="".concat(S,"-uploader-item"),Zn=function(e){var a=e.item,n=e.imageFit,r=e.previewSize,l=e.deletable,c=e.index,d=e.beforeDelete,o=e.name,s=e.onDelete,u=function(){if(d){var h=d.apply(null,[a,{name:o,index:c}]);Qe(h)?h.then(function(I){I&&s&&s()}):h&&s&&s()}else s&&s()},v=function(){if(Je(a))return(0,t.jsx)(ze,{fit:n,width:r||"90px",height:r||"90px",src:a.content||a.url||""})},g=function(){if(l)return(0,t.jsx)("div",{className:"".concat(ie,"-delete"),onClick:u,children:(0,t.jsx)("div",{className:"".concat(ie,"-delete-icon"),children:(0,t.jsx)(M,{size:"2x",icon:"times"})})})},b=function(){var h=a.status,I=a.message;if(!(!h||h==="done"))return(0,t.jsxs)("div",{className:"".concat(ie,"-mask"),children:[h==="loading"&&(0,t.jsx)(M,{size:"lg",icon:"spinner",spin:!0}),h==="failed"&&(0,t.jsx)(M,{size:"lg",icon:"exclamation-circle"}),(0,t.jsx)("span",{children:I})]})},C=function(){var h=a.percent,I=a.status;if(I==="uploading")return(0,t.jsx)("div",{className:"".concat(ie,"-progress-wrap"),children:(0,t.jsx)(Be,{percent:h||0,wrapStyle:{height:"8px"}})})};return(0,t.jsxs)("div",{className:ie,children:[v(),g(),b(),C()]})},Gn=Zn,$e=(0,F.createContext)({length:0}),Xn=S+"-breadcrmb",Jn=function(e){var a=e.separator,n=e.children,r=e.inactiveColor,l=e.activeColor,c=e.onSelect,d=function(g){c&&c(g)},o={length:(n==null?void 0:n.length)||0,separator:"/",inactiveColor:r,activeColor:l,onSelect:d},s=B()(Xn),u=function(){return F.Children.map(n,function(g,b){var C=g;if(C.type.displayName==="TabBarItem")return F.cloneElement(C,{index:b});console.error("Warning: Breadcrumb has a child which is not BreadcrumbItem")})};return(0,t.jsx)("ul",{className:s,children:(0,t.jsx)($e.Provider,{value:o,children:u()})})},Kn=Jn,me=S+"-breadcrmb-item",Le=function(e){var a=e.index,n=e.disabled,r=e.children,l=B()(me,p()({},"".concat(me,"-disabled"),n)),c=(0,F.useContext)($e),d=function(){n||c.onSelect&&c.onSelect(a)},o={color:c.length-1===a?c.activeColor:c.inactiveColor};return(0,t.jsxs)("li",{className:l,onClick:d,style:o,children:[(0,t.jsx)("span",{className:"".concat(me,"-link"),children:r}),(0,t.jsx)("span",{className:"".concat(me,"-separator"),children:c.length-1!==a&&c.separator})]})};Le.displayName="TabBarItem";var Qn=Le,oe=S+"-tree-select",Ee=function(){var e=(0,F.useContext)(Ie),a=e.data,n=e.index,r=e.onChangeTree,l=e.activeColor,c=(0,F.useState)(n||0),d=X()(c,2),o=d[0],s=d[1],u=function(f,h){f.disabled||(s(h),r&&r(f,h))},v=function(f,h){return B()("".concat(oe,"-sidebar-item"),p()(p()({},"".concat(oe,"-sidebar-item-active"),o===h),"".concat(oe,"-sidebar-item-disabled"),f.disabled))},g=function(f){return{backgroundColor:l&&f===o?l:""}},b=function(){return!a||!a.length?(console.warn("The data is not a Array or the length of the data is 0"),""):a.map(function(f,h){return(0,t.jsxs)("li",{onClick:u.bind(void 0,f,h),className:v(f,h),children:[(0,t.jsx)("span",{style:g(h),className:"".concat(oe,"-sidebar-item-line")}),f.label]},h)})};return(0,t.jsx)("ul",{className:"".concat(oe,"-sidebar"),children:b()})};Ee.defaultProps={};var Yn=Ee,ge=S+"-tree-select-content",Re=function(e){var a=(0,F.useContext)(Ie),n=a.data,r=a.index,l=r===void 0?0:r,c=a.activeId,d=a.multiple,o=a.onChangeTreeItem,s=a.activeColor,u=a.inactiveColor,v=[];n&&n[l]&&n[l].children&&(v=n[l].children);var g=(0,F.useState)(c),b=X()(g,2),C=b[0],f=b[1],h=function(y,w){if(!y.disabled){var P=y.value;if(C!=null&&C.includes(P)){var O=C.indexOf(P),L=Se().cloneDeep(C);L.splice(O,1),f(L),o&&o(y,L)}else if(d){var z=Se().cloneDeep(C);z==null||z.push(P),f(z),o&&o(y,z)}else f([P]),o&&o(y,P)}},I=function(y,w){var P=B()("".concat(ge,"-item"),p()(p()({},"".concat(ge,"-item-active"),C.includes(y.value)),"".concat(ge,"-item-disabled"),y.disabled));return P},A=function(y){return s||u?{color:C.includes(y)?s:u||""}:{}},R=function(){return v.map(function(y,w){var P=function(L){return C.includes(L.value)?(0,t.jsx)(M,{icon:"check"}):""};return(0,t.jsxs)("li",{className:I(y,w),style:A(y.value),onClick:h.bind(void 0,y,w),children:[(0,t.jsx)("span",{children:y.label}),(0,t.jsx)("span",{children:P(y)})]},w)})};return(0,t.jsx)("ul",{className:ge,children:R()})};Re.displayName="TreeSelectItem";var qn=Re,Ie=(0,F.createContext)({multiple:!1,data:[]}),_n=S+"-tree-select",Ae=function(e){var a=e.data,n=e.onChangeTree,r=e.onChangeTreeItem,l=e.inactiveColor,c=e.activeColor,d=e.index,o=d===void 0?0:d,s=e.activeId,u=s===void 0?[]:s,v=e.multiple,g=e.height,b=g===void 0?"300px":g,C=(0,F.useState)(o||0),f=X()(C,2),h=f[0],I=f[1],A=function(w,P){r&&r(w,P)},R=function(w,P){I(P),n&&n(w,P)},k={inactiveColor:l,activeColor:c,data:a,multiple:v,onChangeTreeItem:A,onChangeTree:R,index:h,activeId:Array.isArray(u)?u:[u]};return(0,t.jsx)("div",{className:_n,style:{height:b},children:(0,t.jsxs)(Ie.Provider,{value:k,children:[(0,t.jsx)(Yn,{}),(0,t.jsx)(qn,{})]})})};Ae.defaultProps={};var ea=Ae,na=["children","color","dot","max","content","size","fixed","style"],le=S+"-badge",aa=function(e){var a=e.children,n=e.color,r=e.dot,l=r===void 0?!1:r,c=e.max,d=c===void 0?99:c,o=e.content,s=e.size,u=e.fixed,v=e.style,g=Q()(e,na),b=N()({backgroundColor:n},v);o&&(o=Number(o)?Number(o):o);var C=function(){return l?"":typeof o=="number"&&o>d?"".concat(d,"+"):o},f=B()("".concat(le,"-wrap")),h=B()(le,p()(p()(p()({},"".concat(le,"-dot-large"),l&&s==="lg"),"".concat(le,"-fixed"),typeof o=="number"||u||l),"".concat(le,"-dot"),l));return(0,t.jsxs)("div",{className:f,children:[a,(o||l)&&(0,t.jsx)("sup",N()(N()({className:h,style:N()({},b)},g),{},{children:C()}))]})},ta=aa,Ce="".concat(S,"-uploader"),ra=function(e){var a=(0,F.useRef)(null),n=e.multiple,r=n===void 0?!0:n,l=e.disabled,c=l===void 0?!1:l,d=e.customHeaer,o=e.previewSize,s=e.imageFit,u=s===void 0?"fill":s,v=e.maxCount,g=e.deletable,b=g===void 0?!0:g,C=e.name,f=e.customFileName,h=e.maxSize,I=e.accept,A=I===void 0?"image/*":I,R=e.action,k=e.onOversize,y=e.onChange,w=e.beforeUpload,P=e.onRemove,O=(0,F.useState)(e.fileList||[]),L=X()(O,2),z=L[0],W=L[1],H=function(m,T){W(function(j){return j.map(function(D){return D.uid===m.uid?N()(N()({},D),T):D})})},Z=function(m){m.forEach(function(T){$(T,m)})},$=function(m,T){var j,D={uid:Date.now()+"upload-file",file:m.file,status:"",message:"",content:m.content};if(W(function(G){return[].concat(Ne()(G),[D])}),!!m.file){var V=new FormData;V.append(f||((j=m.file)===null||j===void 0?void 0:j.name),m.file),Vn.Z.post(R,V,{headers:N()({"Content-Type":"multipart/form-data"},d),onUploadProgress:function(ee){var Y=Math.round(ee.loaded*100/ee.total)||0;H(D,{percent:Y,status:"uploading"})}}).then(function(G){y&&y(m.file,T,G),H(D,{status:"done"})}).catch(function(G){y&&y(m.file,T,G),H(D,{status:"failed",message:"\u4E0A\u4F20\u5931\u8D25"})})}},E=function(m,T){return(0,t.jsx)(Gn,{item:m,imageFit:u,index:T,previewSize:o,beforeDelete:m.beforeDelete,deletable:b,name:C,onDelete:function(){K(m,T)}},T)},K=function(m,T){var j=z.slice(0),D=j.splice(T,1);W(j),P&&P(D[0])},xe=function(){return z.map(E)},ce=function(m){return new Promise(function(T){var j=new FileReader;j.onload=function(D){T(D.target.result)},j.readAsDataURL(m)})},be=function(m){if(se(),h&&Te(m,h))if((0,ke.isArray)(m)){var T=Ye(m,h),j=T.valid,D=T.invalid;m=j,k&&k(D)}else{k&&k(ye(m));return}if(m=ye(m),R){if(!m.length)return;Z(m)}else W([].concat(Ne()(z),Ne()(m)))},se=function(){a!=null&&a.current&&(a.current.value="")},oa=function(m){if(Array.isArray(m)){if(v){var T=+v-z.length;m.length>T&&(m=m.slice(0,T))}Promise.all(m.map(function(j){return ce(j)})).then(function(j){var D=m.map(function(V,G){var ee={uid:Date.now()+"upload-file",file:V,status:"",message:""};if(j[G]&&(ee.content=j[G]),w){var Y=w(V);if(!Y)return!1;if(Y&&Y instanceof Promise)Y.then(function(Oe){return Oe}).catch(function(Oe){});else if(Y)return ee}return ee});D=D.filter(function(V){return V}),D.length&&be(D)})}else ce(m).then(function(j){if(v){var D=+v-z.length;if(D<=0)return}var V={uid:Date.now()+"upload-file",file:m,status:"",message:""};j&&(V.content=j),be(V)})},la=function(m){var T=m.target,j=T.files;if(!(c||!j||!j.length)){var D=j.length===1?[j[0]]:[].slice.call(j);oa(D)}},ca=function(){var m=function(){return(0,t.jsx)("input",{ref:a,type:"file",accept:A,className:"".concat(Ce,"-input"),capture:!0,multiple:r,disabled:c,onChange:la})},T=B()("".concat(Ce,"-button"),p()({},"".concat(Ce,"-button-disabled"),c));return(0,t.jsxs)("div",{className:T,children:[(0,t.jsx)(M,{icon:"camera"}),m()]})};return(0,t.jsxs)("div",{className:Ce,children:[xe(),ca()]})},ia=ra}}]);
