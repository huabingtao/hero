"use strict";(self.webpackChunkreact_single_ui=self.webpackChunkreact_single_ui||[]).push([[302],{83302:function(da,Te,C){C.r(Te),C.d(Te,{Badge:function(){return ra},Breadcrumb:function(){return Jn},BreadcrumbItem:function(){return Kn},Button:function(){return tn},Icon:function(){return A},Image:function(){return Fe},Input:function(){return An},Loading:function(){return _e},Mask:function(){return ze},Modal:function(){return kn},Progress:function(){return Le},Switch:function(){return Ln},Toast:function(){return In},TreeSelect:function(){return na},Uploader:function(){return oa}});var k=C(75271),Me=C(82187),L=C.n(Me),Ae=C(26068),I=C.n(Ae),Oe=C(67825),_=C.n(Oe),Ue=C(6024),We=C(31759),He=C.n(We),N="sn";function pe(i){return Array.isArray(i)?i:[i]}var Ze=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function Ge(i){return Ze.test(i)}function Ve(i){return i.isImage?!0:i.file&&i.file.type?i.file.type.indexOf("image")===0:i.url?Ge(i.url):typeof i.content=="string"?i.content.indexOf("data:image")===0:!1}function je(i){return typeof i=="function"}function Xe(i){return i!==null&&He()(i)==="object"}function Je(i){return Xe(i)&&je(i.then)&&je(i.catch)}function Pe(i,e){return pe(i).some(function(n){return n.file?je(e)?e(n.file):n.file.size>Number(e):!1})}function Ke(i,e){var n=[],a=[];return i.forEach(function(r){Pe(r,e)&&a.push(r),n.push(r)}),{valid:n,invalid:a}}var t=C(52676),Qe=["className","icon"],Ye=function(e){var n=e.className,a=e.icon,r=_()(e,Qe),l=a,c=L()("".concat(N,"-icon"),n);return(0,t.jsx)(Ue.G,I()({icon:l,className:c},r))},A=Ye,ee=C(24168),U=C(36617);ee.library.add(U.faSpinner,U.faCircleNotch,U.faRotate);var qe=function(e){var n=e.children,a=e.type,r=a===void 0?"spinner":a,l=e.textSize,c=l===void 0?"12":l,s=e.className,o=e.textColor,v=o===void 0?"#000":o,h=e.color,d=h===void 0?"#000":h,f=e.size,g=f===void 0?"lg":f,y=L()("".concat(N,"-loading"),s),x=r||"spinner";return(0,t.jsxs)("div",{className:"".concat(y," inline-flex flex-col items-center"),children:[(0,t.jsx)(A,{icon:x,color:d,size:g,spin:!0}),(0,t.jsx)("span",{className:"inline-block mt-1",style:{fontSize:c+"px",color:v},children:n})]})},_e=qe,en=C(82092),p=C.n(en),nn=C(77762),an=["btnType","block","disabled","size","children","className","href","activeClassName","type"],ua=function(i){return i.Large="lg",i.Small="sm",i}({}),fe=function(i){return i.Primary="primary",i.Default="default",i.Danger="danger",i.Link="link",i}({}),$e=function(e){var n=e.btnType,a=n===void 0?fe.Default:n,r=e.block,l=r===void 0?!1:r,c=e.disabled,s=c===void 0?!1:c,o=e.size,v=e.children,h=e.className,d=e.href,f=e.activeClassName,g=e.type,y=g===void 0?"button":g,x=_()(e,an),u=N+"-btn",b=L()("".concat(u),h,p()(p()(p()(p()({},"".concat(u,"-").concat(a),a),"".concat(u,"-").concat(o),o),"".concat(u,"-block"),l),"disabled",a===fe.Link&&s));return a===fe.Link?(0,t.jsx)("a",I()(I()({className:b,href:d},x),{},{children:v})):(0,t.jsx)(nn.Z,{activeClassName:"".concat(u,"-active ").concat(f),children:(0,t.jsx)("button",I()(I()({className:b,type:y},x),{},{disabled:s,children:v}))})},tn=$e,rn=$e,on=C(25298),ln=C.n(on),cn=C(17069),sn=C.n(cn),dn=C(62657),ne=C.n(dn),un=C(21742),vn=C.n(un),fn=C(83136),hn=C.n(fn),ke=C(30967),mn=!!ke.createPortal,gn=document.createElement("div");document.body.appendChild(gn);var Cn=function(i){vn()(n,i);var e=hn()(n);function n(){var a;ln()(this,n);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return a=e.call.apply(e,[this].concat(l)),p()(ne()(a),"container",null),p()(ne()(a),"maskDom",function(){var s=a.props,o=s.backgroundColor,v=o===void 0?"#00000066":o,h=s.zIndex,d=h===void 0?999:h,f={backgroundColor:v,zIndex:d};return(0,t.jsx)("div",{className:"".concat(N,"-mask"),onClick:a.handleClickMask,style:f,children:a.props.children})}),p()(ne()(a),"handleClickMask",function(){a.removeContainer(),a.props.onMaskClick&&a.props.onMaskClick()}),p()(ne()(a),"getContainer",function(){if(!a.container){var s=document.createElement("div");s.style.height="100%";var o="".concat(N,"-container-").concat(new Date().getTime());s.setAttribute("id",o),document.body.appendChild(s),a.container=s}return a.container}),p()(ne()(a),"removeContainer",function(){a.container&&(document.body.removeChild(a.container),a.container=null)}),p()(ne()(a),"preventDefault",function(s){s.preventDefault()}),a}return sn()(n,[{key:"render",value:function(){var r=this.props.visible;return mn&&r?(document.body.addEventListener("touchmove",this.preventDefault,{passive:!1}),document.body.addEventListener("scroll",this.preventDefault,{passive:!1}),ke.createPortal(this.maskDom(),this.getContainer())):(document.body.removeEventListener("touchmove",this.preventDefault,!1),document.body.removeEventListener("scroll",this.preventDefault,!1),null)}}]),n}(k.Component),ze=Cn,xn=C(48305),G=C.n(xn),bn=C(78760);ee.library.add(U.faImage,U.faSadTear);var yn=function(e){var n=(0,k.useState)(!0),a=G()(n,2),r=a[0],l=a[1],c=(0,k.useState)(!1),s=G()(c,2),o=s[0],v=s[1],h=e.alt,d=e.width,f=d===void 0?"90px":d,g=e.height,y=g===void 0?"90px":g,x=e.src,u=e.fit,b=u===void 0?"fill":u,E=e.radius,w=e.round,j=w===void 0?!1:w,T=e.onLoad,D=e.onError,z=e.showLoading,F=z===void 0?!1:z,Y=e.showError,R=e.lazyLoad;(0,k.useEffect)(function(){x||v(!0)},[]);var W=L()("".concat(N,"-image-wrap"),p()({},"".concat(N,"-image-wrap-round"),j)),V={width:f,height:y,borderRadius:j?"50%":E},X=function(){if(r&&F)return(0,t.jsx)("div",{className:"".concat(N,"-image-loading"),children:(0,t.jsx)(A,{icon:"image",color:"#969799",size:"3x"})});if(o&&Y)return(0,t.jsx)("div",{className:"".concat(N,"-image-error"),children:(0,t.jsx)(A,{icon:"sad-tear",color:"#969799",size:"3x"})})},M=function(){if(!(!x||o)){var B=function(ve){l(!1),T&&T(ve)},q=function(ve){v(!0),D&&D(ve)},ue={alt:h,src:x,style:{objectFit:b}};return R?(0,t.jsx)(bn.ZP,{scroll:!0,offset:-20,children:(0,t.jsx)("img",I()({className:"".concat(N,"-image-img"),onError:q,onLoad:B},ue))}):(0,t.jsx)("img",I()({className:"".concat(N,"-image-img"),onError:q,onLoad:B},ue))}};return(0,t.jsxs)("div",{style:V,className:W,children:[X(),M()]})},Fe=yn,pn=C(79236),Q=null,he,jn=document.createElement("div");document.body.appendChild(jn);var ae=N+"-toast";function Sn(i,e){var n=L()(p()(p()({},"".concat(ae,"-mask"),i),"".concat(ae,"-nomask"),!i));pn.Z.newInstance({prefixCls:"".concat(ae),style:{},transitionName:"".concat(ae,"-fade"),className:n},function(a){return e&&e(a)})}var ie=function(e){var n=e.content,a=e.mask,r=a===void 0?!0:a,l=e.duration,c=e.onClose,s=e.type,o=s===void 0?"info":s,v={info:"",success:"check-circle",fail:"times-circle",loading:"spinner"},h=v[o];he=!1,Sn(r,function(d){if(d){if(Q&&(Q.destroy(),Q=null),he){d.destroy(),he=!1;return}Q=d,d.notice({content:(0,t.jsxs)("div",{className:"".concat(ae,"-content"),role:"alert","aria-live":"assertive",children:[!!h&&(0,t.jsx)("div",{className:"".concat(ae,"-icon-wrap"),children:(0,t.jsx)(A,{icon:h,size:"2x",spin:o==="loading"})}),(0,t.jsx)("div",{children:n})]}),duration:l,onClose:function(){c&&c(),d.destroy(),d=null,Q=null}})}})},Nn={show:function(e,n,a,r,l){var c={content:e,type:n,mask:a,duration:r,onClose:l};return ie(c)},info:function(e,n,a,r){var l={content:e,type:"info",mask:n,duration:a,onClose:r};return ie(l)},success:function(e,n,a,r){var l={content:e,type:"success",mask:n,duration:a,onClose:r};return ie(l)},fail:function(e,n,a,r){var l={content:e,type:"fail",mask:n,duration:a,onClose:r};return ie(l)},loading:function(e,n,a,r){var l={content:e,type:"loading",mask:n,duration:a,onClose:r};return ie(l)},hidden:function(){Q?(Q.destroy(),Q=null):he=!0}},In=Nn,Tn=C(38751),Pn=["visible"],me=N+"-modal",Se=function(e){var n=e.visible,a=n===void 0?!1:n,r=_()(e,Pn),l=function(o,v){var h={};if(o.style&&(h=o.style,typeof h=="string")){var d={cancel:{},default:{},destructive:{color:"red"}};h=d[h]||{}}var f=function(x){x.preventDefault(),o.onPress&&o.onPress()},g=I()({flex:1,padding:0,fontSize:"18px",height:"50px",lineHeight:"50px",textOverflow:"ellipsis",whiteSpace:"nowrap"},h);return(0,t.jsx)(rn,{style:I()({},g),onClick:f,btnType:fe.Link,children:o.text||"Button"},v)},c=function(o){var v=o.title,h=o.message,d=o.footer;return(0,t.jsxs)("div",{className:"".concat(me),children:[(0,t.jsx)("div",{className:"".concat(me,"-header"),children:v}),(0,t.jsx)("div",{className:"".concat(me,"-body"),children:h}),(0,t.jsx)("div",{className:"".concat(me,"-footer"),children:d==null?void 0:d.map(function(f,g){return l(f,g)})})]})};return(0,t.jsx)(ze,I()(I()({visible:a},r),{},{children:(0,t.jsx)(c,I()({},r))}))};Se.alert=function(i){var e=i.title,n=i.message,a=i.footer,r=document.createElement("div");document.body.appendChild(r);var l=(0,Tn.createRoot)(r),c=function(){l.unmount(),r&&r.parentNode&&r.parentNode.removeChild(r)};return l.render((0,t.jsx)(Se,{visible:!0,title:e,message:n,footer:a})),{close:c}};var $n=Se,kn=$n,zn=["value","disabled","size","activeColor","inactiveColor"],oe=N+"-switch",Fn=function(e){var n=e.value,a=n===void 0?!1:n,r=e.disabled,l=r===void 0?!1:r,c=e.size,s=e.activeColor,o=e.inactiveColor,v=_()(e,zn),h=(0,k.useState)(a),d=G()(h,2),f=d[0],g=d[1],y=function(){l||(g(!f),e.onClick&&e.onClick(!a))},x=L()("".concat(oe),p()(p()(p()({},"".concat(oe,"-disabled"),l),"".concat(oe,"-active"),f),"".concat(oe,"-").concat(c),c)),u={};return(s||o)&&(u={backgroundColor:f?s:o}),(0,t.jsx)("div",I()(I()({className:x,style:u},v),{},{onClick:y,children:(0,t.jsx)("div",{className:"".concat(oe,"-round")})}))},Ln=Fn,Dn=["onBlur","onFocus","onChange"],wn=function(e){var n=e.onBlur,a=e.onFocus,r=e.onChange,l=_()(e,Dn),c=(0,k.useRef)(null),s=function(d){var f=d.target.value;n&&n(f)},o=function(d){var f=d.target.value;a&&a(f)},v=function(d){var f=d.target.value.trim();r&&r(f)};return(0,t.jsx)("input",I()({ref:c,onChange:v,onBlur:s,onFocus:o},l))},Bn=wn,En=["type","maxLength","label","required","disabled","readonly","clearble","onChange","onFocus","onBlur","onClear","value"];ee.library.add(U.faTimesCircle);var Rn=function(e){var n="";switch(e){case"tel":n="tel";break;case"password":n="password";break;case"number":n="number";break;default:n=e}return n},ge=N+"-input",Mn=function(e){var n=e.type,a=n===void 0?"text":n,r=e.maxLength,l=e.label,c=e.required,s=c===void 0?!1:c,o=e.disabled,v=o===void 0?!1:o,h=e.readonly,d=h===void 0?!1:h,f=e.clearble,g=f===void 0?!1:f,y=e.onChange,x=e.onFocus,u=e.onBlur,b=e.onClear,E=e.value,w=_()(e,En),j=L()("".concat(ge),p()(p()(p()({},"".concat(ge,"-disabled"),v),"".concat(ge,"-required"),s),"".concat(ge,"-readonly"),d)),T=(0,k.useState)(E||""),D=G()(T,2),z=D[0],F=D[1];(0,k.useEffect)(function(){F(E||"")},[e.value]);var Y=function(B){if(a==="tel"){var q;B=((q=B)===null||q===void 0?void 0:q.replace(/\D/g,""))||""}F(B||""),y&&y(B)},R=function(B){x&&x(B)},W=function(B){u&&u(B)},V=function(){F(""),b&&b()},X=function(){var B=(z==null?void 0:z.length)||0;return r?(0,t.jsxs)("div",{className:"".concat(N,"-input-max-length"),children:[B,"/",r]}):null},M=Rn(a);return(0,t.jsxs)("div",{className:j,children:[(0,t.jsx)("div",{className:"".concat(N,"-input-label"),children:l}),(0,t.jsx)(Bn,I()({className:"".concat(N,"-input-self"),onChange:Y,onFocus:R,onBlur:W,readOnly:d,disabled:v,type:M,value:z,maxLength:r},w)),!v&&!d&&g&&z&&(0,t.jsx)("div",{className:"".concat(N,"-input-clear"),onClick:V,children:(0,t.jsx)(A,{icon:"times-circle"})}),X()]})},An=Mn,On=C(15558),le=C.n(On),Un=C(76246),te=N+"-progress",Wn=L()("".concat(te,"-bar")),Hn=function(e){var n=e.percent,a=e.fixed,r=a===void 0?!1:a,l=e.unfilled,c=e.color,s=e.trackColor,o=e.showPivot,v=e.pivoteText,h=e.textColor,d=e.pivotColor,f=e.inactive,g=e.children,y=e.wrapStyle,x=e.percentStyle,u,b,E,w=L()(te,"".concat(te,"-wrap"),p()(p()({},"".concat(te,"-wrap-fixed"),r),"".concat(te,"-inactive"),f)),j=l?{background:"transparent"}:{background:s};y=I()(I()({},j),y),x=I()({width:"".concat(n,"%"),backgroundColor:f?"rgb(202, 202, 202)":c},x);var T=function(){var M=v||"".concat(n,"%");if(!o)return"";var H={color:h,background:f?"rgb(202, 202, 202)":d,left:"".concat(W,"px")};return(0,t.jsxs)("span",{ref:F,style:H,className:"".concat(te,"-bar-pivot"),children:[M,g]})},D=function(M){b=M},z=function(M){u=M},F=function(M){E=M},Y=(0,k.useState)(0),R=G()(Y,2),W=R[0],V=R[1];return(0,k.useEffect)(function(){setTimeout(function(){u&&b&&E&&V((b.offsetWidth-E.offsetWidth)*+n/100||u.offsetWidth)},10)},[n]),(0,t.jsx)("div",{ref:D,className:w,style:y,role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,children:(0,t.jsx)("div",{className:Wn,style:x,ref:z,children:T()})})},Le=Hn;ee.library.add(U.faTimes,U.faExclamationCircle);var ce="".concat(N,"-uploader-item"),Zn=function(e){var n=e.item,a=e.imageFit,r=e.previewSize,l=e.deletable,c=e.index,s=e.beforeDelete,o=e.name,v=e.onDelete,h=function(){if(s){var u=s.apply(null,[n,{name:o,index:c}]);Je(u)?u.then(function(b){b&&v&&v()}):u&&v&&v()}else v&&v()},d=function(){if(Ve(n))return(0,t.jsx)(Fe,{fit:a,width:r||"90px",height:r||"90px",src:n.content||n.url||""})},f=function(){if(l)return(0,t.jsx)("div",{className:"".concat(ce,"-delete"),onClick:h,children:(0,t.jsx)("div",{className:"".concat(ce,"-delete-icon"),children:(0,t.jsx)(A,{size:"2x",icon:"times"})})})},g=function(){var u=n.status,b=n.message;if(!(!u||u==="done"))return(0,t.jsxs)("div",{className:"".concat(ce,"-mask"),children:[u==="loading"&&(0,t.jsx)(A,{size:"lg",icon:"spinner",spin:!0}),u==="failed"&&(0,t.jsx)(A,{size:"lg",icon:"exclamation-circle"}),(0,t.jsx)("span",{children:b})]})},y=function(){var u=n.percent,b=n.status;if(b==="uploading")return(0,t.jsx)("div",{className:"".concat(ce,"-progress-wrap"),children:(0,t.jsx)(Le,{percent:u||0,wrapStyle:{height:"8px"}})})};return(0,t.jsxs)("div",{className:ce,children:[d(),f(),g(),y()]})},Gn=Zn,De=(0,k.createContext)({length:0}),Vn=N+"-breadcrmb",Xn=function(e){var n=e.separator,a=e.children,r=e.inactiveColor,l=e.activeColor,c=e.onSelect,s=function(f){c&&c(f)},o={length:(a==null?void 0:a.length)||0,separator:"/",inactiveColor:r,activeColor:l,onSelect:s},v=L()(Vn),h=function(){return k.Children.map(a,function(f,g){var y=f;if(y.type.displayName==="TabBarItem")return k.cloneElement(y,{index:g});console.error("Warning: Breadcrumb has a child which is not BreadcrumbItem")})};return(0,t.jsx)("ul",{className:v,children:(0,t.jsx)(De.Provider,{value:o,children:h()})})},Jn=Xn,Ce=N+"-breadcrmb-item",we=function(e){var n=e.index,a=e.disabled,r=e.children,l=L()(Ce,p()({},"".concat(Ce,"-disabled"),a)),c=(0,k.useContext)(De),s=function(){a||c.onSelect&&c.onSelect(n)},o={color:c.length-1===n?c.activeColor:c.inactiveColor};return(0,t.jsxs)("li",{className:l,onClick:s,style:o,children:[(0,t.jsx)("span",{className:"".concat(Ce,"-link"),children:r}),(0,t.jsx)("span",{className:"".concat(Ce,"-separator"),children:c.length-1!==n&&c.separator})]})};we.displayName="TabBarItem";var Kn=we,se=N+"-tree-select",Qn=function(){var e=(0,k.useContext)(Ne),n=e.data,a=e.index,r=a===void 0?0:a,l=e.onChangeTree,c=e.activeColor,s=(0,k.useState)(r),o=G()(s,2),v=o[0],h=o[1],d=function(u,b){u.disabled||(h(b),l&&l(u,b))},f=function(u,b){return L()("".concat(se,"-sidebar-item"),p()(p()({},"".concat(se,"-sidebar-item-active"),v===b),"".concat(se,"-sidebar-item-disabled"),u.disabled))},g=function(u){return{backgroundColor:c&&u===v?c:""}},y=function(){return!n||!n.length?(console.warn("The data is not a Array or the length of the data is 0"),""):n.map(function(u,b){return(0,t.jsxs)("li",{onClick:d.bind(void 0,u,b),className:f(u,b),children:[(0,t.jsx)("span",{style:g(b),className:"".concat(se,"-sidebar-item-line")}),u.label]},b)})};return(0,t.jsx)("ul",{className:"".concat(se,"-sidebar"),children:y()})},Yn=Qn,Be=C(32699),Ee=C.n(Be);ee.library.add(U.faCheck);var xe=N+"-tree-select-content",Re=function(){var e=(0,k.useContext)(Ne),n=e.data,a=e.index,r=a===void 0?0:a,l=e.activeId,c=e.multiple,s=e.onChangeTreeItem,o=e.activeColor,v=e.inactiveColor,h=[];n&&n[r]&&n[r].children&&(h=n[r].children);var d=(0,k.useState)(l),f=G()(d,2),g=f[0],y=f[1],x=function(j){if(!j.disabled){var T=j.value;if(g!=null&&g.includes(T)){var D=g.indexOf(T),z=Ee().cloneDeep(g);z.splice(D,1),y(z),s&&s(j,z)}else if(c){var F=Ee().cloneDeep(g);F==null||F.push(T),y(F),s&&s(j,F)}else y([T]),s&&s(j,T)}},u=function(j){var T=L()("".concat(xe,"-item"),p()(p()({},"".concat(xe,"-item-active"),g.includes(j.value)),"".concat(xe,"-item-disabled"),j.disabled));return T},b=function(j){return o||v?{color:g.includes(j)?o:v||""}:{}},E=function(){return h.map(function(j,T){var D=function(F){return g.includes(F.value)?(0,t.jsx)(A,{icon:"check"}):""};return(0,t.jsxs)("li",{className:u(j),style:b(j.value),onClick:x.bind(void 0,j),children:[(0,t.jsx)("span",{children:j.label}),(0,t.jsx)("span",{children:D(j)})]},T)})};return(0,t.jsx)("ul",{className:xe,children:E()})};Re.displayName="TreeSelectItem";var qn=Re,Ne=(0,k.createContext)({multiple:!1,data:[]}),_n=N+"-tree-select",ea=function(e){var n=e.data,a=n===void 0?[]:n,r=e.onChangeTree,l=e.onChangeTreeItem,c=e.inactiveColor,s=e.activeColor,o=e.index,v=o===void 0?0:o,h=e.activeId,d=h===void 0?[]:h,f=e.multiple,g=e.height,y=g===void 0?"300px":g,x=(0,k.useState)(v||0),u=G()(x,2),b=u[0],E=u[1],w=function(z,F){l&&l(z,F)},j=function(z,F){E(F),r&&r(z,F)},T={inactiveColor:c,activeColor:s,data:a,multiple:f,onChangeTreeItem:w,onChangeTree:j,index:b,activeId:Array.isArray(d)?d:[d]};return(0,t.jsx)("div",{className:_n,style:{height:y},children:(0,t.jsxs)(Ne.Provider,{value:T,children:[(0,t.jsx)(Yn,{}),(0,t.jsx)(qn,{})]})})},na=ea,aa=["children","color","dot","max","content","size","fixed","style"],de=N+"-badge",ta=function(e){var n=e.children,a=e.color,r=e.dot,l=r===void 0?!1:r,c=e.max,s=c===void 0?99:c,o=e.content,v=e.size,h=e.fixed,d=e.style,f=_()(e,aa),g=I()({backgroundColor:a},d);o&&(o=Number(o)?Number(o):o);var y=function(){return l?"":typeof o=="number"&&o>s?"".concat(s,"+"):o},x=L()("".concat(de,"-wrap")),u=L()(de,p()(p()(p()({},"".concat(de,"-dot-large"),l&&v==="lg"),"".concat(de,"-fixed"),typeof o=="number"||h||l),"".concat(de,"-dot"),l));return(0,t.jsxs)("div",{className:x,children:[n,(o||l)&&(0,t.jsx)("sup",I()(I()({className:u,style:I()({},g)},f),{},{children:y()}))]})},ra=ta;ee.library.add(U.faCamera);var be="".concat(N,"-uploader"),ia=function(e){var n=(0,k.useRef)(null),a=e.multiple,r=a===void 0?!0:a,l=e.disabled,c=l===void 0?!1:l,s=e.customHeaer,o=e.previewSize,v=e.imageFit,h=v===void 0?"fill":v,d=e.maxCount,f=e.deletable,g=f===void 0?!0:f,y=e.name,x=e.customFileName,u=e.maxSize,b=e.accept,E=b===void 0?"image/*":b,w=e.action,j=e.onOversize,T=e.onChange,D=e.beforeUpload,z=e.onRemove,F=(0,k.useState)(e.fileList||[]),Y=G()(F,2),R=Y[0],W=Y[1],V=function(m,P){W(function(S){return S.map(function($){return $.uid===m.uid?I()(I()({},$),P):$})})},X=function(m){m.forEach(function(P){M(P,m)})},M=function(m,P){var S,$={uid:Date.now()+"upload-file",file:m.file,status:"",message:"",content:m.content};if(W(function(J){return[].concat(le()(J),[$])}),!!m.file){var Z=new FormData;Z.append(x||((S=m.file)===null||S===void 0?void 0:S.name),m.file),Un.Z.post(w,Z,{headers:I()({"Content-Type":"multipart/form-data"},s),onUploadProgress:function(re){var K,Ie=Math.round(re.loaded*100/((K=re.total)!==null&&K!==void 0?K:0))||0;V($,{percent:Ie,status:"uploading"})}}).then(function(J){T&&T(m.file,P,J),V($,{status:"done"})}).catch(function(J){T&&T(m.file,P,J),V($,{status:"failed",message:"\u4E0A\u4F20\u5931\u8D25"})})}},H=function(m,P){return(0,t.jsx)(Gn,{item:m,imageFit:h,index:P,previewSize:o,beforeDelete:m.beforeDelete,deletable:g,name:y,onDelete:function(){B(m,P)}},P)},B=function(m,P){var S=R.slice(0),$=S.splice(P,1);W(S),z&&z($[0])},q=function(){return R.map(H)},ue=function(m){return new Promise(function(P){var S=new FileReader;S.onload=function($){P($.target.result)},S.readAsDataURL(m)})},ye=function(m){if(ve(),u&&Pe(m,u))if((0,Be.isArray)(m)){var P=Ke(m,u),S=P.valid,$=P.invalid;m=S,j&&j($)}else{j&&j(pe(m));return}if(m=pe(m),w){if(!m.length)return;X(m)}else W([].concat(le()(R),le()(m))),T&&T("",[].concat(le()(R),le()(m)),"\u6587\u4EF6\u9009\u62E9")},ve=function(){n!=null&&n.current&&(n.current.value="")},la=function(m){if(Array.isArray(m)){if(d){var P=+d-R.length;m.length>P&&(m=m.slice(0,P))}Promise.all(m.map(function(S){return ue(S)})).then(function(S){var $=m.map(function(Z,J){var re={uid:Date.now()+"upload-file",file:Z,status:"",message:""};if(S[J]&&(re.content=S[J]),D){var K=D(Z);if(!K)return!1;if(K&&K instanceof Promise)K.then(function(Ie){return Ie}).catch(function(){});else if(K)return re}return re});$=$.filter(function(Z){return Z}),$.length&&ye($)})}else ue(m).then(function(S){if(d){var $=+d-R.length;if($<=0)return}var Z={uid:Date.now()+"upload-file",file:m,status:"",message:""};S&&(Z.content=S),ye(Z)})},ca=function(m){var P=m.target,S=P.files;if(!(c||!S||!S.length)){var $=S.length===1?[S[0]]:[].slice.call(S);la($)}},sa=function(){var m=function(){return(0,t.jsx)("input",{ref:n,type:"file",accept:E,className:"".concat(be,"-input"),capture:!0,multiple:r,disabled:c,onChange:ca})},P=L()("".concat(be,"-button"),p()({},"".concat(be,"-button-disabled"),c));return(0,t.jsxs)("div",{className:P,children:[(0,t.jsx)(A,{icon:"camera"}),m()]})};return(0,t.jsxs)("div",{className:be,children:[q(),sa()]})},oa=ia}}]);
